import e,{useState as l,useEffect as he,useRef as U}from"react";import{createRoot as nl}from"react-dom/client";import{Plus as fe,X as F,TrendingUp as Ot,ChevronRight as Ze,ChevronLeft as ll,Download as il,Upload as dl,DollarSign as Pa,PieChart as cl,Receipt as yo,Calendar as Jr,Search as ml,Check as le,Star as gl,Sparkles as pl,Trophy as ho,Clock as fo,Target as ul,Archive as vo,ArrowUp as xl,Wallet as bl,Briefcase as ko,ListTodo as No,BarChart3 as yl,Zap as hl,Moon as fl,Sun as vl,Edit3 as Oa,Printer as kl,Camera as Nl}from"lucide-react";import{PieChart as wo,Pie as Co,Cell as $o,ResponsiveContainer as ve,Tooltip as ke,BarChart as qr,Bar as Lt,XAxis as Re,YAxis as Be,CartesianGrid as et,Legend as jt,AreaChart as Wr,Area as Ur}from"recharts";var wl=`
  @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800;900&family=Fredoka:wght@400;500;600;700&display=swap');

  * {
    font-family: 'Nunito', sans-serif;
  }

  :root {
    --candy-pink: #FF6B9D;
    --candy-purple: #C490E4;
    --candy-blue: #6BB9F0;
    --candy-mint: #5FCFB5;
    --candy-yellow: #FFD93D;
    --candy-orange: #FFB347;
    --candy-coral: #FF8C7F;
    --soft-white: #FEFCFF;
    --soft-gray: #F7F5FA;
    --medium-gray: #E8E4EE;
    --text-dark: #2D2A3E;
    --text-light: #6B6789;
    
    /* Light mode defaults */
    --bg-primary: linear-gradient(135deg, #FFF5F8 0%, #F0F4FF 50%, #F5FFF8 100%);
    --bg-card: #FFFFFF;
    --bg-input: rgba(255, 255, 255, 0.8);
    --bg-hover: rgba(0, 0, 0, 0.02);
    --bg-tab: #F3F4F6;
    --border-light: #E5E7EB;
    --border-card: #F3F4F6;
    --text-primary: #2D2A3E;
    --text-secondary: #6B6789;
    --text-muted: #9CA3AF;
    --shadow-color: rgba(45, 42, 62, 0.1);
  }

  .dark-mode {
    --candy-pink: #FF85B3;
    --candy-purple: #D4A8F0;
    --candy-blue: #7EC8F8;
    --candy-mint: #6DDFC5;
    --candy-yellow: #FFE066;
    --candy-orange: #FFC266;
    --candy-coral: #FFA299;
    
    --bg-primary: linear-gradient(135deg, #1A1625 0%, #1E1B2E 50%, #1A2025 100%);
    --bg-card: #252233;
    --bg-input: rgba(45, 40, 60, 0.8);
    --bg-hover: rgba(255, 255, 255, 0.05);
    --bg-tab: #2D2A3E;
    --border-light: #3D3A4E;
    --border-card: #3D3A4E;
    --text-primary: #F0EDF5;
    --text-secondary: #A8A3B8;
    --text-muted: #6B6789;
    --shadow-color: rgba(0, 0, 0, 0.3);
  }

  body {
    background: var(--bg-primary);
    min-height: 100vh;
    /* Prevent overscroll bounce that causes the stopping issue */
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
  }

  /* iOS Safari touch fixes - prevent button/tap issues */
  button, [role="button"], .press-feedback, .btn-press {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    touch-action: manipulation;
    cursor: pointer;
  }

  /* Prevent text selection on interactive elements */
  .candy-input, input, select, textarea {
    -webkit-tap-highlight-color: transparent;
  }

  /* Ensure clickable areas respond immediately on iOS */
  * {
    -webkit-tap-highlight-color: transparent;
  }

  html {
    /* Smooth scrolling */
    scroll-behavior: smooth;
    overscroll-behavior: none;
  }

  /* Fix for iOS Safari scroll stopping issue */
  html, body {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  .app-container {
    background: var(--bg-primary);
    min-height: 100vh;
    position: relative;
    transition: background 0.3s ease;
  }

  .dark-mode .app-container {
    background: linear-gradient(180deg, 
      rgba(26, 22, 37, 0.98) 0%, 
      rgba(30, 27, 46, 0.98) 50%, 
      rgba(26, 32, 37, 0.98) 100%);
  }

  /* Simplified background - removed heavy animated pseudo-elements */

  /* Bouncy button effect */
  .btn-bounce {
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  .btn-bounce:hover {
    transform: translateY(-3px) scale(1.02);
  }
  .btn-bounce:active {
    transform: translateY(1px) scale(0.98);
    transition: all 0.1s ease;
  }

  /* Jelly wobble on click */
  @keyframes jelly {
    0% { transform: scale(1); }
    25% { transform: scale(0.95, 1.05); }
    50% { transform: scale(1.05, 0.95); }
    75% { transform: scale(0.98, 1.02); }
    100% { transform: scale(1); }
  }
  .jelly-click {
    animation: jelly 0.4s ease;
  }

  /* Smooth fade in - only animate once */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .fade-in-up {
    animation: fadeInUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  /* Stagger children - animate only on initial mount, not re-renders */
  .stagger-children > * {
    animation: fadeInUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }
  .stagger-children > *:nth-child(1) { animation-delay: 0.05s; }
  .stagger-children > *:nth-child(2) { animation-delay: 0.1s; }
  .stagger-children > *:nth-child(3) { animation-delay: 0.15s; }
  .stagger-children > *:nth-child(4) { animation-delay: 0.2s; }
  .stagger-children > *:nth-child(5) { animation-delay: 0.25s; }
  .stagger-children > *:nth-child(6) { animation-delay: 0.3s; }

  /* Satisfying checkbox with enhanced animation */
  @keyframes checkPop {
    0% { transform: scale(0) rotate(-45deg); opacity: 0; }
    50% { transform: scale(1.4) rotate(10deg); opacity: 1; }
    70% { transform: scale(0.9) rotate(-5deg); }
    100% { transform: scale(1) rotate(0deg); opacity: 1; }
  }
  .check-pop {
    animation: checkPop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* Checkbox container burst effect */
  @keyframes checkboxBurst {
    0% { box-shadow: 0 0 0 0 rgba(52, 211, 153, 0.7); }
    50% { box-shadow: 0 0 0 12px rgba(52, 211, 153, 0); }
    100% { box-shadow: 0 0 0 0 rgba(52, 211, 153, 0); }
  }
  .checkbox-burst {
    animation: checkboxBurst 0.5s ease-out;
  }

  /* Sparkle particles around checkbox */
  @keyframes sparkle1 {
    0% { transform: translate(0, 0) scale(0); opacity: 1; }
    100% { transform: translate(-15px, -15px) scale(1); opacity: 0; }
  }
  @keyframes sparkle2 {
    0% { transform: translate(0, 0) scale(0); opacity: 1; }
    100% { transform: translate(15px, -12px) scale(1); opacity: 0; }
  }
  @keyframes sparkle3 {
    0% { transform: translate(0, 0) scale(0); opacity: 1; }
    100% { transform: translate(12px, 15px) scale(1); opacity: 0; }
  }
  @keyframes sparkle4 {
    0% { transform: translate(0, 0) scale(0); opacity: 1; }
    100% { transform: translate(-12px, 12px) scale(1); opacity: 0; }
  }
  .checkbox-sparkles {
    position: relative;
  }
  .checkbox-sparkles::before,
  .checkbox-sparkles::after {
    content: '\u2728';
    position: absolute;
    font-size: 10px;
    pointer-events: none;
  }
  .checkbox-sparkles.sparkle-active::before {
    animation: sparkle1 0.5s ease-out forwards;
  }
  .checkbox-sparkles.sparkle-active::after {
    animation: sparkle2 0.5s ease-out 0.05s forwards;
  }

  /* iOS Safari touch scroll support */
  .ios-scroll {
    -webkit-overflow-scrolling: touch;
    overflow-y: auto;
    overscroll-behavior: contain;
  }
  
  /* Modal scroll container */
  .modal-scroll-container {
    -webkit-overflow-scrolling: touch;
    overflow-y: scroll;
    overscroll-behavior-y: contain;
    touch-action: pan-y;
  }

  /* Number pop */
  @keyframes numberPop {
    0% { transform: scale(1); }
    50% { transform: scale(1.15); }
    100% { transform: scale(1); }
  }
  .number-pop {
    animation: numberPop 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* Shake animation */
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    20% { transform: translateX(-8px); }
    40% { transform: translateX(8px); }
    60% { transform: translateX(-4px); }
    80% { transform: translateX(4px); }
  }
  .shake {
    animation: shake 0.4s ease;
  }

  /* Glow pulse */
  @keyframes glowPulse {
    0%, 100% { box-shadow: 0 0 20px rgba(255, 107, 157, 0.3); }
    50% { box-shadow: 0 0 40px rgba(255, 107, 157, 0.5); }
  }
  .glow-pulse {
    animation: glowPulse 2s ease-in-out infinite;
  }

  /* Card hover lift - simplified for better scroll performance */
  .card-lift {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  @media (hover: hover) {
    .card-lift:hover {
      transform: translateY(-4px);
      box-shadow: 0 15px 30px rgba(45, 42, 62, 0.12);
    }
  }

  /* Responsive expense form grid */
  .expense-grid {
    display: grid;
    gap: 1.5rem;
    align-items: start;
  }
  @media (min-width: 700px) {
    .expense-grid {
      grid-template-columns: 160px 1fr 180px;
    }
  }
  @media (max-width: 699px) {
    .expense-grid {
      grid-template-columns: 1fr;
    }
  }

  /* Save pulse animation for download button */
  @keyframes savePulse {
    0% {
      box-shadow: 0 0 0 0 rgba(95, 207, 181, 0.6);
    }
    50% {
      box-shadow: 0 0 0 8px rgba(95, 207, 181, 0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(95, 207, 181, 0);
    }
  }
  .save-pulse {
    animation: savePulse 1.5s ease-in-out;
    border-color: #5FCFB5 !important;
  }

  /* Delete animation - shrink and fade */
  @keyframes deleteSlide {
    0% {
      opacity: 1;
      transform: scale(1) translateX(0);
      max-height: 200px;
    }
    50% {
      opacity: 0.5;
      transform: scale(0.95) translateX(10px);
    }
    100% {
      opacity: 0;
      transform: scale(0.9) translateX(30px);
      max-height: 0;
      padding: 0;
      margin: 0;
      border-width: 0;
    }
  }
  .delete-animation {
    animation: deleteSlide 0.4s ease-out forwards;
    overflow: hidden;
  }

  /* Smooth expand/collapse for accordions */
  .accordion-content {
    display: grid;
    grid-template-rows: 0fr;
    transition: grid-template-rows 0.3s ease-out, opacity 0.3s ease-out;
    opacity: 0;
  }
  .accordion-content.expanded {
    grid-template-rows: 1fr;
    opacity: 1;
  }
  .accordion-content > div {
    overflow: hidden;
  }

  /* Success flash on buttons */
  @keyframes successFlash {
    0% {
      background: linear-gradient(to bottom right, #34D399, #10B981);
      box-shadow: 0 0 0 0 rgba(52, 211, 153, 0.7);
    }
    50% {
      box-shadow: 0 0 0 12px rgba(52, 211, 153, 0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(52, 211, 153, 0);
    }
  }
  .success-flash {
    animation: successFlash 0.6s ease-out;
  }
  .success-flash::after {
    content: '\u2713';
    position: absolute;
    animation: checkPop 0.3s ease-out;
  }

  /* Pull to refresh indicator */
  @keyframes pullSpin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  
  /* Pull to refresh wallet animation */
  @keyframes walletBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
  }
  @keyframes walletShake {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-10deg); }
    75% { transform: rotate(10deg); }
  }
  @keyframes coinFall {
    0% { transform: translateY(-10px) rotate(0deg); opacity: 0; }
    20% { opacity: 1; }
    100% { transform: translateY(15px) rotate(180deg); opacity: 0; }
  }

  /* Larger touch targets for mobile */
  .touch-target {
    min-width: 44px;
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .touch-target-sm {
    min-width: 36px;
    min-height: 36px;
  }

  /* Haptic feedback press states */
  .press-feedback {
    transition: transform 0.1s ease, opacity 0.1s ease;
  }
  .press-feedback:active {
    transform: scale(0.95);
    opacity: 0.8;
  }

  /* Swipe tab transitions */
  .tab-content {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
  }
  .tab-content.slide-left-enter {
    transform: translateX(100%);
    opacity: 0;
  }
  .tab-content.slide-right-enter {
    transform: translateX(-100%);
    opacity: 0;
  }
  .tab-content.slide-left-exit {
    transform: translateX(-100%);
    opacity: 0;
  }
  .tab-content.slide-right-exit {
    transform: translateX(100%);
    opacity: 0;
  }
  .tab-content.active {
    transform: translateX(0);
    opacity: 1;
  }

  /* Undo toast animation */
  @keyframes slideInUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  @keyframes slideOutDown {
    from {
      transform: translateY(0);
      opacity: 1;
    }
    to {
      transform: translateY(100%);
      opacity: 0;
    }
  }
  .undo-toast {
    animation: slideInUp 0.3s ease forwards;
  }
  .undo-toast.hiding {
    animation: slideOutDown 0.3s ease forwards;
  }

  /* Context menu animation */
  @keyframes scaleIn {
    from {
      transform: scale(0.8);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }
  .context-menu {
    animation: scaleIn 0.15s ease forwards;
  }

  /* Button press effect with ripple */
  .btn-press {
    position: relative;
    overflow: hidden;
  }
  .btn-press::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.3s ease, height 0.3s ease;
  }
  .btn-press:active::after {
    width: 200%;
    height: 200%;
  }

  /* Input styling classes */
  .candy-input {
    width: 100%;
    padding: 0.75rem 1rem;
    border-radius: 1rem;
    outline: none;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.06);
    transition: background-color 0.3s, color 0.3s;
  }
  .candy-input-light {
    background: rgba(255,255,255,0.8);
    color: #374151;
  }
  .candy-input-light::placeholder {
    color: #9CA3AF;
  }
  .candy-input-dark {
    background: #1E1B2E;
    color: #F3F4F6;
  }
  .candy-input-dark::placeholder {
    color: #6B7280;
  }
  .candy-date-wrapper-light {
    background: rgba(255,255,255,0.8);
    border: 2px solid #F3F4F6;
  }
  .candy-date-wrapper-dark {
    background: linear-gradient(to right, rgba(139,92,246,0.2), rgba(236,72,153,0.2));
    border: 2px solid rgba(139,92,246,0.3);
  }

  /* Tab slide indicator */
  .tab-indicator {
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* Smooth input focus - simplified */
  .input-candy {
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
    border: 3px solid transparent;
  }
  .input-candy:focus {
    border-color: var(--candy-pink);
    box-shadow: 0 0 0 4px rgba(255, 107, 157, 0.15);
  }

  /* Floating labels */
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
  }

  /* Progress bar fill */
  @keyframes progressFill {
    from { width: 0; }
  }
  .progress-fill {
    animation: progressFill 1s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* Confetti explosion */
  @keyframes confettiDrop {
    0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
  }

  /* Character bounce */
  @keyframes characterBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
  }
  .character-bounce {
    animation: characterBounce 2s ease-in-out infinite;
  }

  /* Sparkle */
  @keyframes sparkle {
    0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }
    50% { opacity: 1; transform: scale(1) rotate(180deg); }
  }

  /* Slide in from right */
  @keyframes slideInRight {
    from { opacity: 0; transform: translateX(30px); }
    to { opacity: 1; transform: translateX(0); }
  }
  .slide-in-right {
    animation: slideInRight 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* Achievement unlock */
  @keyframes achievementUnlock {
    0% { transform: scale(0) rotate(-180deg); opacity: 0; }
    50% { transform: scale(1.2) rotate(10deg); }
    100% { transform: scale(1) rotate(0deg); opacity: 1; }
  }
  .achievement-unlock {
    animation: achievementUnlock 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* Ripple effect */
  @keyframes ripple {
    to { transform: scale(4); opacity: 0; }
  }

  /* Blob shapes */
  .blob-bg {
    background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%23FF6B9D20' d='M44.7,-76.4C58.8,-69.2,71.8,-59.1,79.6,-45.8C87.4,-32.6,90,-16.3,89.1,-0.5C88.2,15.3,83.8,30.5,75.6,43.3C67.4,56.1,55.4,66.4,41.8,74.1C28.2,81.8,14.1,86.9,-1,88.6C-16.1,90.3,-32.2,88.6,-45.6,81.2C-59,73.8,-69.7,60.7,-77.4,46.2C-85.1,31.7,-89.8,15.8,-89.8,0C-89.8,-15.9,-85.1,-31.7,-76.8,-44.9C-68.4,-58,-56.4,-68.4,-42.8,-75.9C-29.2,-83.4,-14.6,-88,0.5,-88.8C15.6,-89.7,30.7,-83.6,44.7,-76.4Z' transform='translate(100 100)' /%3E%3C/svg%3E");
    background-size: cover;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }
  ::-webkit-scrollbar-track {
    background: var(--bg-tab);
    border-radius: 10px;
  }
  ::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, var(--candy-pink), var(--candy-purple));
    border-radius: 10px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #E5598A, #A87FCA);
  }

  /* Dark mode toggle button */
  .dark-mode-toggle {
    transition: all 0.3s ease;
  }
  .dark-mode-toggle:hover {
    transform: rotate(15deg);
  }

  /* Tooltip */
  .tooltip-candy {
    position: relative;
  }
  .tooltip-candy::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(-5px);
    background: var(--text-dark);
    color: white;
    padding: 8px 12px;
    border-radius: 10px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s ease;
  }
  .tooltip-candy:hover::after {
    opacity: 1;
    transform: translateX(-50%) translateY(-10px);
  }
`,Hr=({value:y,onChange:h,className:$="",darkMode:S})=>e.createElement("div",{className:`relative rounded-2xl overflow-hidden transition-colors duration-300 ${$}`,style:S?{background:"linear-gradient(to right, rgba(139,92,246,0.2), rgba(236,72,153,0.2))",border:"2px solid rgba(139,92,246,0.3)"}:{background:"linear-gradient(to right, rgba(167,139,250,0.15), rgba(244,114,182,0.15))",border:"2px solid rgba(167,139,250,0.3)"}},e.createElement("input",{type:"date",value:y,onChange:h,className:`w-full px-4 py-3 text-center font-medium bg-transparent outline-none cursor-pointer ${S?"text-gray-100":"text-gray-700"}`})),Kr=({value:y,onChange:h,className:$="",darkMode:S,placeholder:L=""})=>e.createElement("div",{className:`relative rounded-2xl overflow-hidden transition-colors duration-300 ${$}`,style:S?{background:"linear-gradient(to right, rgba(139,92,246,0.2), rgba(236,72,153,0.2))",border:"2px solid rgba(139,92,246,0.3)"}:{background:"linear-gradient(to right, rgba(167,139,250,0.15), rgba(244,114,182,0.15))",border:"2px solid rgba(167,139,250,0.3)"}},e.createElement("input",{type:"time",value:y,onChange:h,placeholder:L,className:`w-full px-4 py-3 text-center font-medium bg-transparent outline-none cursor-pointer ${S?"text-gray-100":"text-gray-700"}`})),v=({children:y,onClick:h,variant:$="primary",size:S="md",className:L="",disabled:B=!1})=>{let a="btn-bounce font-bold rounded-2xl transition-all flex items-center justify-center gap-2 shadow-lg",C={primary:"bg-gradient-to-r from-emerald-400 via-teal-400 to-cyan-400 text-white hover:from-emerald-500 hover:via-teal-500 hover:to-cyan-500 shadow-emerald-300/50 border-2 border-emerald-300/30",secondary:"bg-gradient-to-br from-violet-400 to-purple-500 text-white hover:from-violet-500 hover:to-purple-600 shadow-purple-300/50",success:"bg-gradient-to-r from-emerald-400 via-teal-400 to-cyan-400 text-white hover:from-emerald-500 hover:via-teal-500 hover:to-cyan-500 shadow-emerald-300/50 border-2 border-emerald-300/30",warning:"bg-gradient-to-br from-amber-400 to-orange-500 text-white hover:from-amber-500 hover:to-orange-600 shadow-amber-300/50",ghost:"bg-white/80 dark:bg-[#2D2A3E] text-gray-700 dark:text-gray-200 hover:bg-white dark:hover:bg-[#3D3A4E] shadow-gray-200/50 dark:shadow-black/20 border-2 border-gray-100 dark:border-[#3D3A4E]"},f={sm:"px-3 py-2 text-sm",md:"px-5 py-3 text-base",lg:"px-7 py-4 text-lg"};return e.createElement("button",{onClick:h,onTouchEnd:H=>{!B&&h&&(H.preventDefault(),h(H))},disabled:B,className:`${a} ${C[$]} ${f[S]} ${B?"opacity-50 cursor-not-allowed":""} ${L}`},y)},k=({children:y,className:h="",highlight:$=!1,darkMode:S})=>e.createElement("div",{className:`card-lift rounded-3xl p-6 shadow-xl border-2 transition-colors duration-300 ${S?`bg-[#252233] border-[#3D3A4E] ${$?"border-pink-400/50":""}`:`bg-white border-gray-100 ${$?"border-pink-200 glow-pulse":""}`} ${h}`},y),Yt=({value:y,onChange:h,children:$,className:S="",variant:L="default",darkMode:B})=>{let a=L==="purple",C={backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='${B?"%23A8A3B8":"%236B6789"}' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},f={...C,background:"linear-gradient(to right, rgba(139,92,246,0.2), rgba(236,72,153,0.2))",border:"2px solid rgba(139,92,246,0.3)",backgroundImage:C.backgroundImage,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},X={...C,background:"linear-gradient(to right, rgba(167,139,250,0.15), rgba(244,114,182,0.15))",border:"2px solid rgba(167,139,250,0.3)",backgroundImage:C.backgroundImage,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},H=()=>a?B?f:X:C;return e.createElement("select",{value:y,onChange:h,className:`input-candy px-4 py-3 rounded-2xl outline-none shadow-inner cursor-pointer appearance-none pr-8 transition-colors duration-300 ${a?B?"text-gray-100":"text-gray-700":B?"bg-[#1E1B2E] text-gray-100":"bg-white/80 text-gray-700"} ${S}`,style:H()},$)},O=({icon:y,label:h,value:$,color:S="pink",pop:L=!1,darkMode:B})=>{let C={pink:{gradient:"from-pink-400 to-rose-400",text:"text-pink-500",bgLight:"bg-pink-50",bgDark:"bg-pink-900/20"},blue:{gradient:"from-blue-400 to-cyan-400",text:"text-blue-500",bgLight:"bg-blue-50",bgDark:"bg-blue-900/20"},green:{gradient:"from-emerald-400 to-teal-400",text:"text-emerald-500",bgLight:"bg-emerald-50",bgDark:"bg-emerald-900/20"},purple:{gradient:"from-purple-400 to-violet-400",text:"text-purple-500",bgLight:"bg-purple-50",bgDark:"bg-purple-900/20"},orange:{gradient:"from-orange-400 to-amber-400",text:"text-orange-500",bgLight:"bg-orange-50",bgDark:"bg-orange-900/20"}}[S];return e.createElement("div",{className:`flex items-center gap-3 p-4 rounded-2xl transition-colors duration-300 ${B?C.bgDark:C.bgLight}`},e.createElement("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${C.gradient} flex items-center justify-center text-white shadow-lg`},y),e.createElement("div",null,e.createElement("p",{className:`text-xs font-medium uppercase tracking-wide ${B?"text-gray-400":"text-gray-500"}`},h),e.createElement("p",{className:`text-xl font-bold ${C.text} ${L?"number-pop":""}`},$)))},Cl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tt=({month:y,year:h,setMonth:$,setYear:S,className:L="",variant:B="default",darkMode:a})=>e.createElement("div",{className:`flex gap-2 ${L}`},e.createElement(Yt,{value:y,onChange:C=>$(parseInt(C.target.value)),className:"min-w-[80px]",variant:B,darkMode:a},Cl.map((C,f)=>e.createElement("option",{key:f,value:f},C))),e.createElement(Yt,{value:h,onChange:C=>S(parseInt(C.target.value)),className:"min-w-[90px]",variant:B,darkMode:a},Array.from({length:10},(C,f)=>new Date().getFullYear()-5+f).map(C=>e.createElement("option",{key:C,value:C},C)))),at=({active:y,onClick:h,icon:$,label:S,darkMode:L})=>e.createElement("button",{onClick:h,className:`btn-bounce relative px-4 py-3 rounded-2xl font-semibold flex items-center gap-2 transition-all ${y?L?"bg-[#2D2A3E] text-pink-400 shadow-lg scale-105":"bg-white text-pink-600 shadow-lg scale-105":L?"text-gray-400 hover:text-gray-200 hover:bg-white/5":"text-gray-500 hover:text-gray-700 hover:bg-white/50"}`},$,e.createElement("span",{className:"hidden sm:inline"},S),y&&e.createElement("span",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-8 h-2 bg-gradient-to-r from-pink-400 via-purple-400 to-blue-400 rounded-full shadow-lg"})),R=({icon:y,title:h,subtitle:$,darkMode:S})=>e.createElement("div",{className:"text-center py-12 fade-in-up"},e.createElement("div",{className:"text-6xl mb-4 character-bounce inline-block"},y),e.createElement("h3",{className:`text-xl font-bold mb-2 ${S?"text-gray-300":"text-gray-600"}`},h),e.createElement("p",{className:S?"text-gray-500":"text-gray-400"},$));function $l(){let[y,h]=l("income"),[$,S]=l(!0),[L,B]=l(!1),[a,C]=l(()=>{if(typeof window<"u"){let t=localStorage.getItem("financial-darkmode");return t!==null?JSON.parse(t):window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[f,X]=l([]),[H,Pe]=l(""),[rt,zt]=l(""),[La,Jt]=l(""),[Qr,ja]=l(()=>{let t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}),[qt,Eo]=l(new Date().getMonth()),[Wt,So]=l(new Date().getFullYear()),[Gr,Do]=l({}),[Ne,Ut]=l([]),[st,_r]=l("manual"),[ot,Ht]=l(["Salary","Freelance","Gift"]),[Xr,Kt]=l(null),[j,Oe]=l([]),[Y,Le]=l([]),[Qt,Vr]=l({}),[Mo,Gt]=l(!1),[ee,_t]=l("credit"),[nt,Ya]=l(""),[Xt,za]=l(""),[Zr,Rr]=l(""),[es,ts]=l(""),[as,rs]=l(""),[ss,os]=l("15"),[Ja,qa]=l(null),[lt,it]=l(""),[Wa,Ua]=l(null),[dt,Ha]=l(""),[A,ie]=l([]),[de,ct]=l(""),[mt,Vt]=l(""),[we,Zt]=l(""),[oe,Rt]=l("buy"),[ns,ls]=l(new Date().getMonth()),[is,ds]=l(new Date().getFullYear()),[cs,Ao]=l({}),[Ce,ea]=l({}),[ta,ms]=l(new Date().getFullYear()),[gt,gs]=l("manual"),[pt,aa]=l(["Morpho","Mamo","Btc"]),[ps,ra]=l(null),[w,te]=l([]),[ut,sa]=l(""),[us,Ka]=l("Food"),[xs,Qa]=l(new Date().toISOString().split("T")[0]),[Ga,oa]=l(""),[xt,Io]=l(new Date().getMonth()),[bt,To]=l(new Date().getFullYear()),[_a,Xa]=l({Subscriptions:"",Misc:""}),[ae,yt]=l([]),[Fo,Va]=l(!1),[Za,bs]=l(""),[Ra,ys]=l(""),[hs,Bo]=l("Subscriptions"),[fs,Po]=l("1"),[I,ce]=l([]),[na,ht]=l(""),[re,je]=l(""),[la,ft]=l(""),[vs,er]=l(new Date().toISOString().split("T")[0]),[Ye,ia]=l(""),[ze,da]=l({}),[ks,Oo]=l({}),[vt,Lo]=l(new Date().getMonth()),[kt,jo]=l(new Date().getFullYear()),[Je,Ns]=l("hours"),[$e,tr]=l(""),[Ee,ar]=l(""),[Nt,ws]=l("manual"),[wt,ca]=l(["Main Job","Side Gig","Freelance"]),[Cs,ma]=l(null),[rr,$s]=l({}),[me,Es]=l(0),[sr,Ss]=l({}),[E,V]=l([]),[ga,or]=l(""),[Ds,Ms]=l(new Date().toISOString().split("T")[0]),[nr,lr]=l(""),[ir,dr]=l("medium"),[ge,pa]=l(null),[Yo,cr]=l(null),[mr,As]=l(""),[K,qe]=l([]),[gr,zo]=l(!1),[pr,Jo]=l({}),[Sl,Dl]=l(new Date().toISOString().split("T")[0]),[ua,qo]=l(!1),[Ct,Is]=l(()=>{let t=new Date;return{month:Math.max(0,t.getMonth()-5),year:t.getFullYear()}}),[$t,Ts]=l(()=>{let t=new Date;return{month:t.getMonth(),year:t.getFullYear()}}),[Ml,Al]=l(new Date().getFullYear()),[Wo,Fs]=l(!1),[Bs,Uo]=l(""),[Il,Ho]=l(!1),[Ko,ur]=l(!1),[xr,Ps]=l(""),[Qo,Os]=l(!1),[We,br]=l(""),[Go,Et]=l(!1),[yr,hr]=l(!1),[_o,Ls]=l(!1),[js,Xo]=l(""),[Vo,Ue]=l(!1),[fr,He]=l(null),[xa,Ys]=l(!1),St=U(null),[Zo,zs]=l(!1),[Js,qs]=l(null),[Se,ba]=l([]),[Ro,en]=l(!1),[ya,Ke]=l(null),[Q,Ws]=l(null),[ha,Us]=l(null),[Tl,tn]=l(null),[Fl,Bl]=l({}),[De,se]=l(new Set),[T,Hs]=l(null),[Z,vr]=l(null),[an,kr]=l(!1),[G,fa]=l(null),[rn,va]=l(!1),pe=U({x:0,y:0}),Dt=U({x:0,y:0}),sn=U(null),[ue,ka]=l(null),Me=U(null),Nr=U(null),wr=U(null),Cr=U(null),$r=U(null),Er=U(null),[on,Sr]=l(!1),[nn,ln]=l(""),Mt=U(null),xe=["Food","Gas","Parking","Car","Subscriptions","Misc"],J={Food:{color:"#5FCFB5",bg:"#E8FBF6",icon:"\u{1F355}",gradient:"from-emerald-400 to-teal-400"},Gas:{color:"#FFB347",bg:"#FFF4E6",icon:"\u26FD",gradient:"from-orange-400 to-amber-400"},Parking:{color:"#6BB9F0",bg:"#E6F4FF",icon:"\u{1F17F}\uFE0F",gradient:"from-blue-400 to-cyan-400"},Car:{color:"#C490E4",bg:"#F5E6FF",icon:"\u{1F697}",gradient:"from-purple-400 to-violet-400"},Subscriptions:{color:"#FF6B9D",bg:"#FFE6EE",icon:"\u{1F4F1}",gradient:"from-pink-400 to-rose-400"},Misc:{color:"#FFD93D",bg:"#FFFBE6",icon:"\u{1F4E6}",gradient:"from-yellow-400 to-amber-300"}},Qe=["#FF6B9D","#6BB9F0","#5FCFB5","#FFD93D","#C490E4","#FFB347","#FF8C7F"],Dr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Pl=["January","February","March","April","May","June","July","August","September","October","November","December"],Ks=["You're doing amazing! \u{1F31F}","Every penny counts! \u{1F4B0}","Keep crushing those goals! \u{1F3AF}","Financial freedom ahead! \u{1F680}","You're a budgeting superstar! \u2B50","Smart money moves! \u{1F4AA}","Building wealth one day at a time! \u{1F3C6}","Your future self thanks you! \u{1F64C}"],Na=[{id:"first_expense",name:"First Step",description:"Log your first expense",icon:"\u{1F463}",check:()=>w.length>=1},{id:"expense_10",name:"Tracker",description:"Log 10 expenses",icon:"\u{1F4DD}",check:()=>w.length>=10},{id:"expense_50",name:"Dedicated",description:"Log 50 expenses",icon:"\u{1F4CA}",check:()=>w.length>=50},{id:"expense_100",name:"Centurion",description:"Log 100 expenses",icon:"\u{1F4AF}",check:()=>w.length>=100},{id:"first_income",name:"Money Maker",description:"Log your first income",icon:"\u{1F4B5}",check:()=>f.length>=1},{id:"income_1000",name:"Thousandaire",description:"Earn $1,000 total",icon:"\u{1F4B0}",check:()=>f.reduce((t,s)=>t+s.amount,0)>=1e3},{id:"income_5000",name:"High Roller",description:"Earn $5,000 total",icon:"\u{1F911}",check:()=>f.reduce((t,s)=>t+s.amount,0)>=5e3},{id:"income_10000",name:"Big League",description:"Earn $10,000 total",icon:"\u{1F3C6}",check:()=>f.reduce((t,s)=>t+s.amount,0)>=1e4},{id:"first_investment",name:"Investor",description:"Make your first investment",icon:"\u{1F4C8}",check:()=>A.length>=1},{id:"invest_5000",name:"Portfolio Builder",description:"Invest $5,000 total",icon:"\u{1F48E}",check:()=>A.reduce((t,s)=>t+s.amount,0)>=5e3},{id:"first_todo",name:"Planner",description:"Create your first task",icon:"\u2705",check:()=>E.length>=1||K.length>=1},{id:"todo_25",name:"Task Master",description:"Complete 25 tasks",icon:"\u{1F3AF}",check:()=>K.filter(t=>t.completed).length>=25},{id:"first_work",name:"Clock Puncher",description:"Log your first work hours",icon:"\u23F0",check:()=>I.length>=1},{id:"work_100",name:"Hard Worker",description:"Log 100 work hours",icon:"\u{1F4AA}",check:()=>I.reduce((t,s)=>t+s.hours,0)>=100},{id:"diversified",name:"Diversified",description:"Invest in 3+ assets",icon:"\u{1F308}",check:()=>[...new Set(A.map(t=>t.asset))].length>=3},{id:"budget_categories",name:"Organizer",description:"Use all categories",icon:"\u{1F5C2}\uFE0F",check:()=>[...new Set(w.map(t=>t.category))].length>=6}];he(()=>{dn()},[]),he(()=>{localStorage.setItem("financial-darkmode",JSON.stringify(a))},[a]),he(()=>{!$&&L&&cn()},[f,A,w,I,E,K,_a,ae,ze,Ce,Se,Ne,j,Y,pt,ot,wt,y,$,L]),he(()=>{$||Na.forEach(t=>{!Se.includes(t.id)&&t.check()&&(ba(s=>[...s,t.id]),qs(t),zs(!0),setTimeout(()=>{zs(!1),qs(null)},5e3))})},[w,f,A,E,K,I,$]),he(()=>{let t=null,s=0,r=()=>{let o=window.scrollY,n=o>400,i=s>400;n!==i&&(t&&clearTimeout(t),t=setTimeout(()=>{en(n)},100)),s=o};return window.addEventListener("scroll",r,{passive:!0}),()=>{window.removeEventListener("scroll",r),t&&clearTimeout(t)}},[]),he(()=>{if(yr){let t=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${t}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.overflow="hidden"}else{let t=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.overflow="",t&&window.scrollTo(0,parseInt(t||"0",10)*-1)}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.overflow=""}},[yr]);let Mr=U(!1);he(()=>{let t=()=>{Mt.current&&clearTimeout(Mt.current),Mr.current&&(Mr.current=!1,Sr(!1)),Mt.current=setTimeout(()=>{ln(Ks[Math.floor(Math.random()*Ks.length)]),Mr.current=!0,Sr(!0)},9e4)},s=["keydown"];return s.forEach(r=>document.addEventListener(r,t,{passive:!0})),t(),()=>{s.forEach(r=>document.removeEventListener(r,t)),Mt.current&&clearTimeout(Mt.current)}},[]);let dn=()=>{try{let t=localStorage.getItem("financial-investments"),s=localStorage.getItem("financial-settings"),r=localStorage.getItem("financial-expenses"),o=localStorage.getItem("financial-worklogs"),n=localStorage.getItem("financial-todos"),i=localStorage.getItem("financial-onetime"),c=localStorage.getItem("financial-annual"),m=localStorage.getItem("financial-archived-todos"),x=localStorage.getItem("financial-category-notes"),P=localStorage.getItem("financial-recurring"),b=localStorage.getItem("financial-jobrates"),u=localStorage.getItem("financial-currentvalues"),N=localStorage.getItem("financial-achievements"),D=localStorage.getItem("financial-creditcards"),Xe=localStorage.getItem("financial-debitcards"),Te=localStorage.getItem("financial-quickassets"),Ba=localStorage.getItem("financial-quicksources"),Fe=localStorage.getItem("financial-quickjobs");if(t){let ne=JSON.parse(t);ne.forEach(Ve=>Ve.date=new Date(Ve.date)),ie(ne)}if(s){let ne=JSON.parse(s);h(ne.viewMode||"income")}r&&te(JSON.parse(r)),o&&ce(JSON.parse(o)),n&&V(JSON.parse(n)),i&&X(JSON.parse(i)),c&&Ut(JSON.parse(c)),m&&qe(JSON.parse(m)),x&&Xa(JSON.parse(x)),P&&yt(JSON.parse(P)),b&&da(JSON.parse(b)),u&&ea(JSON.parse(u)),N&&ba(JSON.parse(N)),D&&Oe(JSON.parse(D)),Xe&&Le(JSON.parse(Xe)),Te&&aa(JSON.parse(Te)),Ba&&Ht(JSON.parse(Ba)),Fe&&ca(JSON.parse(Fe)),B(!0)}catch(t){console.error("Error loading data:",t)}finally{S(!1)}},cn=()=>{try{localStorage.setItem("financial-investments",JSON.stringify(A)),localStorage.setItem("financial-settings",JSON.stringify({viewMode:y})),localStorage.setItem("financial-expenses",JSON.stringify(w)),localStorage.setItem("financial-worklogs",JSON.stringify(I)),localStorage.setItem("financial-todos",JSON.stringify(E)),localStorage.setItem("financial-onetime",JSON.stringify(f)),localStorage.setItem("financial-annual",JSON.stringify(Ne)),localStorage.setItem("financial-archived-todos",JSON.stringify(K)),localStorage.setItem("financial-category-notes",JSON.stringify(_a)),localStorage.setItem("financial-recurring",JSON.stringify(ae)),localStorage.setItem("financial-jobrates",JSON.stringify(ze)),localStorage.setItem("financial-currentvalues",JSON.stringify(Ce)),localStorage.setItem("financial-achievements",JSON.stringify(Se)),localStorage.setItem("financial-creditcards",JSON.stringify(j)),localStorage.setItem("financial-debitcards",JSON.stringify(Y)),localStorage.setItem("financial-quickassets",JSON.stringify(pt)),localStorage.setItem("financial-quicksources",JSON.stringify(ot)),localStorage.setItem("financial-quickjobs",JSON.stringify(wt)),tn(new Date),Os(!0),setTimeout(()=>Os(!1),1500)}catch(t){console.error("Failed to save:",t)}},mn=()=>{let t={investments:A,expenses:w,workLogs:I,todos:E,oneTimeIncomes:f,annualIncomeCategories:Ne,archivedTodos:K,categoryNotes:_a,recurringExpenses:ae,jobRates:ze,currentValues:Ce,unlockedAchievements:Se,creditCards:j,debitCards:Y,quickAssets:pt,quickSources:ot,quickJobs:wt,settings:{viewMode:y},exportDate:new Date().toISOString()};Uo(JSON.stringify(t)),Fs(!0)},gn=()=>{if(xr.trim())try{let t=JSON.parse(xr);t.investments&&(t.investments.forEach(s=>s.date=new Date(s.date)),ie(t.investments)),t.expenses&&te(t.expenses),t.workLogs&&ce(t.workLogs),t.todos&&V(t.todos),t.oneTimeIncomes&&X(t.oneTimeIncomes),t.annualIncomeCategories&&Ut(t.annualIncomeCategories),t.archivedTodos&&qe(t.archivedTodos),t.categoryNotes&&Xa(t.categoryNotes),t.recurringExpenses&&yt(t.recurringExpenses),t.jobRates&&da(t.jobRates),t.currentValues&&ea(t.currentValues),t.unlockedAchievements&&ba(t.unlockedAchievements),t.quickAssets&&aa(t.quickAssets),t.quickSources&&Ht(t.quickSources),t.quickJobs&&ca(t.quickJobs),Ps(""),ur(!1)}catch{alert("Error: Invalid backup data")}},Ol=()=>{["financial-investments","financial-settings","financial-expenses","financial-worklogs","financial-todos","financial-onetime","financial-annual","financial-archived-todos","financial-category-notes","financial-recurring","financial-jobrates","financial-currentvalues","financial-achievements","financial-creditcards","financial-debitcards","financial-quickassets","financial-quicksources","financial-quickjobs"].forEach(s=>localStorage.removeItem(s)),ie([]),te([]),ce([]),V([]),X([]),Ut([]),qe([]),Xa({Subscriptions:"",Misc:""}),yt([]),da({}),ea({}),ba([]),Oe([]),Le([]),aa(["Morpho","Mamo","Btc"]),Ht(["Salary","Freelance","Gift"]),ca(["Main Job","Side Gig","Freelance"]),h("income"),Ho(!1)},q=t=>{Ws(t),setTimeout(()=>Ws(null),400)},At=t=>{Us(t),setTimeout(()=>Us(null),300)},It=t=>{Hs(t),setTimeout(()=>Hs(null),600)},wa=t=>{let r=t.replace(/[^0-9.]/g,"").split(".");return r.length>2?r[0]+"."+r.slice(1).join(""):(r[0]&&(r[0]=parseInt(r[0],10).toLocaleString()),r.join("."))},Ca=t=>t?t.replace(/,/g,""):"",$a=["income","investments","budget","clockin","todos","trends"],pn=t=>{if(ue){ka(null);return}if(t.target.closest('button, input, textarea, select, a, [role="button"], .press-feedback, .touch-target')){pe.current={x:0,y:0,cancelled:!0};return}pe.current={x:t.touches[0].clientX,y:t.touches[0].clientY,cancelled:!1}},un=t=>{pe.current.cancelled||(Dt.current={x:t.touches[0].clientX,y:t.touches[0].clientY})},xn=()=>{if(pe.current.cancelled||rn){pe.current={x:0,y:0,cancelled:!1},Dt.current={x:0,y:0};return}let t=Dt.current.x-pe.current.x,s=Dt.current.y-pe.current.y;if(Math.abs(t)>80&&Math.abs(t)>Math.abs(s)*1.5){let r=$a.indexOf(y);t<0&&r<$a.length-1?(fa("left"),va(!0),setTimeout(()=>{h($a[r+1]),fa(null),va(!1)},300)):t>0&&r>0&&(fa("right"),va(!0),setTimeout(()=>{h($a[r-1]),fa(null),va(!1)},300))}pe.current={x:0,y:0,cancelled:!1},Dt.current={x:0,y:0}},Ea=(t,s,r)=>{Z?.timeoutId&&clearTimeout(Z.timeoutId),kr(!0);let o=setTimeout(()=>{vr(null),kr(!1)},3500);vr({type:t,item:s,timeoutId:o,restoreCallback:r})},Qs=()=>{Z&&(Z.restoreCallback?.(),Z.timeoutId&&clearTimeout(Z.timeoutId)),vr(null),kr(!1)},Tt=U(!1),be=(t,s,r)=>{let o=t.touches?t.touches[0]:t,n=o.clientX,i=o.clientY;Tt.current=!1,Me.current=setTimeout(()=>{Tt.current=!0,ka({type:s,item:r,x:n,y:i}),navigator.vibrate&&navigator.vibrate(50)},500)},_=t=>{Me.current&&(clearTimeout(Me.current),Me.current=null),Tt.current&&(t.preventDefault(),t.stopPropagation(),setTimeout(()=>{Tt.current=!1},100))},Sa=t=>{Me.current&&(clearTimeout(Me.current),Me.current=null)},Ge=t=>{if(!ue)return;let{type:s,item:r}=ue;switch(t){case"delete":s==="income"?Gs(r.id):s==="investment"?_s(r.id):s==="expense"?Vs(r.id):s==="worklog"?so(r.id):s==="todo"&&deleteTodo(r.id);break;case"duplicate":if(s==="income"){let o={...r,id:Date.now(),date:new Date().toISOString().split("T")[0]};X([o,...f])}else if(s==="expense"){let o={...r,id:Date.now(),date:new Date().toISOString().split("T")[0]};te([o,...w])}else if(s==="investment"){let o={...r,id:Date.now(),date:new Date,month:new Date().getMonth(),year:new Date().getFullYear()};ie([o,...A])}else if(s==="worklog"){let o={...r,id:Date.now(),date:new Date().toISOString().split("T")[0]};ce([o,...I])}break;case"edit":s==="income"?(Pe(r.name),zt(r.amount.toString()),Jt(r.notes||""),ja(r.date),X(f.filter(o=>o.id!==r.id))):s==="expense"?(sa(r.amount.toString()),Ka(r.category),oa(r.notes||""),Qa(r.date),te(w.filter(o=>o.id!==r.id))):s==="investment"?(ct(r.asset),Vt(r.amount.toString()),Zt(r.quantity?.toString()||""),Rt(r.type||"buy"),ls(r.month),ds(r.year),ie(A.filter(o=>o.id!==r.id))):s==="worklog"&&(je(r.job),ht(r.hours.toString()),ft(r.description||""),ia(r.hourlyRate?.toString()||""),er(r.date),ce(I.filter(o=>o.id!==r.id)));break}ka(null)};he(()=>{let t=r=>{if(!Tt.current&&ue){let o=document.querySelector(".context-menu");if(o&&o.contains(r.target))return;ka(null)}},s=setTimeout(()=>{document.addEventListener("mousedown",t),document.addEventListener("touchstart",t)},50);return()=>{clearTimeout(s),document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[ue]);let bn=async()=>{if(!(!St.current||xa)){Ys(!0);try{window.html2canvas||await new Promise((b,u)=>{let N=document.createElement("script");N.src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js",N.onload=b,N.onerror=u,document.head.appendChild(N)}),await new Promise(b=>setTimeout(b,100));let t=await window.html2canvas(St.current,{backgroundColor:a?"#1A1625":"#FFF5F8",scale:2,useCORS:!0,logging:!1,windowWidth:St.current.scrollWidth,windowHeight:St.current.scrollHeight}),s=t.width,r=t.height,o=Math.floor(r/2),n=document.createElement("canvas");n.width=s,n.height=o,n.getContext("2d").drawImage(t,0,0,s,o,0,0,s,o);let c=document.createElement("canvas");c.width=s,c.height=r-o,c.getContext("2d").drawImage(t,0,o,s,r-o,0,0,s,r-o);let x=n.toDataURL("image/png"),P=c.toDataURL("image/png");He({top:x,bottom:P}),Ue(!0)}catch(t){console.error("Screenshot failed:",t),alert("Screenshot failed. Please try again.")}finally{Ys(!1)}}},Ar=(t,s)=>{se(r=>new Set([...r,t])),setTimeout(()=>{s(),se(r=>{let o=new Set(r);return o.delete(t),o})},400)},yn=()=>{Pe(""),zt(""),Jt("");let t=new Date;ja(`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`),Nr.current?.focus()},hn=()=>{ct(""),Vt(""),Zt(""),Rt("buy"),wr.current?.focus()},fn=()=>{sa(""),Ka("Food"),Qa(new Date().toISOString().split("T")[0]),oa(""),Cr.current?.focus()},vn=()=>{ht(""),ft(""),er(new Date().toISOString().split("T")[0]),tr(""),ar(""),$r.current?.focus()},kn=()=>{or(""),lr(""),Ms(new Date().toISOString().split("T")[0]),dr("medium"),pa(null),Er.current?.focus()},ye=t=>{let s=t.split("-");return`${Dr[parseInt(s[1])-1]} ${parseInt(s[2])}, ${s[0]}`},d=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),Da=()=>{if(!H.trim()){q("income-name");return}if(!rt){q("income-amount");return}let t=Date.now();X([...f,{id:t,name:H,amount:parseFloat(rt),date:Qr,notes:La.trim()||null}]),Pe(""),zt(""),Jt(""),Ke(t),setTimeout(()=>Ke(null),500),At("income-total"),It("add-income"),setTimeout(()=>Nr.current?.focus(),100)},Gs=t=>{let s=f.find(r=>r.id===t);s&&(se(r=>new Set([...r,t])),setTimeout(()=>{X(r=>r.filter(o=>o.id!==t)),se(r=>{let o=new Set(r);return o.delete(t),o}),Ea("income",s,()=>{X(r=>[s,...r])})},400))},Ma=()=>[...new Set(f.map(t=>t.name))],Nn=t=>f.filter(s=>{let r=s.date.split("-");return s.name===t&&parseInt(r[1])-1===qt&&parseInt(r[0])===Wt}).sort((s,r)=>r.date.localeCompare(s.date)),wn=t=>f.filter(s=>{let r=s.date.split("-");return s.name===t&&parseInt(r[1])-1===qt&&parseInt(r[0])===Wt}).reduce((s,r)=>s+r.amount,0),Cn=()=>f.filter(t=>{let s=t.date.split("-");return parseInt(s[1])-1===qt&&parseInt(s[0])===Wt}).reduce((t,s)=>t+s.amount,0),$n=()=>{let t={};return Ma().filter(s=>Ne.includes(s)).forEach(s=>{t[s]=f.filter(r=>r.name===s).reduce((r,o)=>r+o.amount,0)}),Object.values(t).reduce((s,r)=>s+r,0)},Ir=[{emoji:"\u{1F4B3}",bg:"from-violet-500 to-purple-600",light:"bg-violet-100",dark:"bg-violet-900/30"},{emoji:"\u{1F4B3}",bg:"from-blue-500 to-cyan-600",light:"bg-blue-100",dark:"bg-blue-900/30"},{emoji:"\u{1F4B3}",bg:"from-emerald-500 to-teal-600",light:"bg-emerald-100",dark:"bg-emerald-900/30"},{emoji:"\u{1F4B3}",bg:"from-rose-500 to-pink-600",light:"bg-rose-100",dark:"bg-rose-900/30"},{emoji:"\u{1F4B3}",bg:"from-amber-500 to-orange-600",light:"bg-amber-100",dark:"bg-amber-900/30"},{emoji:"\u{1F4B3}",bg:"from-indigo-500 to-blue-600",light:"bg-indigo-100",dark:"bg-indigo-900/30"}],En=()=>{if(!nt.trim()||!Xt)return;let t={id:Date.now(),name:nt,balance:parseFloat(Xt)||0,creditLimit:parseFloat(Zr)||0,apr:parseFloat(es)||0,minPayment:parseFloat(as)||0,dueDay:parseInt(ss)||15,colorIndex:j.length%Ir.length,payments:[],createdAt:new Date().toISOString()};Oe([...j,t]),Ya(""),za(""),Rr(""),ts(""),rs(""),os("15"),Gt(!1)},Sn=t=>{Ar(t,()=>Oe(j.filter(s=>s.id!==t)))},Dn=t=>{!lt||parseFloat(lt)<=0||(Oe(j.map(s=>{if(s.id===t){let r={id:Date.now(),amount:parseFloat(lt),date:new Date().toISOString().split("T")[0]};return{...s,balance:Math.max(0,s.balance-parseFloat(lt)),payments:[...s.payments||[],r]}}return s})),it(""),qa(null))},Ll=(t,s)=>{Oe(j.map(r=>r.id===t?{...r,balance:parseFloat(s)||0}:r))},Mn=t=>{let s=new Date,r=new Date(s.getFullYear(),s.getMonth(),t.dueDay);r<s&&(r=new Date(s.getFullYear(),s.getMonth()+1,t.dueDay));let o=Math.ceil((r-s)/(1e3*60*60*24));return{dueDate:r,daysUntil:o}},An=t=>{if(t.balance<=0||t.minPayment<=0)return null;let s=t.apr/100/12,r=t.balance,o=0,n=360;for(;r>0&&o<n;){let c=r*s;r=r+c-t.minPayment,o++,r<0&&(r=0)}if(o>=n)return{months:-1,message:"Will take 30+ years"};let i=new Date;return i.setMonth(i.getMonth()+o),{months:o,date:i,message:o===1?"1 month":`${o} months`}},Ft=()=>j.reduce((t,s)=>t+s.balance,0),Aa=()=>j.reduce((t,s)=>t+(s.creditLimit||0),0),Tr=()=>{let t=Aa();return t<=0?0:Ft()/t*100},Fr=[{bg:"from-green-500 to-emerald-600",light:"bg-green-100",dark:"bg-green-900/30"},{bg:"from-teal-500 to-cyan-600",light:"bg-teal-100",dark:"bg-teal-900/30"},{bg:"from-lime-500 to-green-600",light:"bg-lime-100",dark:"bg-lime-900/30"},{bg:"from-cyan-500 to-blue-600",light:"bg-cyan-100",dark:"bg-cyan-900/30"}],In=()=>{if(!nt.trim())return;let t={id:Date.now(),name:nt,balance:parseFloat(Xt)||0,colorIndex:Y.length%Fr.length,transactions:[],createdAt:new Date().toISOString()};Le([...Y,t]),Ya(""),za(""),Gt(!1),_t("credit")},Tn=t=>{Ar(t,()=>Le(Y.filter(s=>s.id!==t)))},Fn=t=>{!dt||parseFloat(dt)<=0||(Le(Y.map(s=>{if(s.id===t){let r={id:Date.now(),type:"deposit",amount:parseFloat(dt),date:new Date().toISOString().split("T")[0]};return{...s,balance:s.balance+parseFloat(dt),transactions:[...s.transactions||[],r]}}return s})),Ha(""),Ua(null))},jl=(t,s)=>{!s||parseFloat(s)<=0||Le(Y.map(r=>{if(r.id===t){let o={id:Date.now(),type:"withdrawal",amount:parseFloat(s),date:new Date().toISOString().split("T")[0]};return{...r,balance:Math.max(0,r.balance-parseFloat(s)),transactions:[...r.transactions||[],o]}}return r}))},Br=()=>Y.reduce((t,s)=>t+s.balance,0),Ia=()=>{if(!de){q("invest-asset");return}if(!mt){q("invest-amount");return}if(oe==="sell"&&we){let t=Bt(de);if(parseFloat(we)>t.totalQuantity){q("invest-quantity");return}}ie([...A,{id:Date.now(),asset:de,amount:parseFloat(mt),quantity:we?parseFloat(we):null,type:oe,month:ns,year:is,date:new Date}]),Vt(""),Zt(""),At("invest-total"),It("add-investment"),setTimeout(()=>wr.current?.focus(),100)},_s=t=>{let s=A.find(r=>r.id===t);s&&(se(r=>new Set([...r,t])),setTimeout(()=>{ie(r=>r.filter(o=>o.id!==t)),se(r=>{let o=new Set(r);return o.delete(t),o}),Ea("investment",s,()=>{ie(r=>[s,...r])})},400))},Ae=[...new Set(A.map(t=>t.asset))],Bn=()=>A.reduce((t,s)=>s.type==="sell"?t-s.amount:t+s.amount,0),Pn=()=>A.filter(t=>t.type!=="sell").reduce((t,s)=>t+s.amount,0),On=()=>A.filter(t=>t.type==="sell").reduce((t,s)=>t+s.amount,0),Bt=t=>{let s=A.filter(D=>D.asset===t),r=0,o=0,n=0,i=0,c=!1,m=!1;s.forEach(D=>{if(D.type==="sell")if(D.quantity&&r>0){let Te=o/r*D.quantity;i+=D.amount-Te,r-=D.quantity,o-=Te,c=!0}else D.quantity?n-=D.amount:n>0?n-=Math.min(n,D.amount):o-=D.amount;else D.quantity&&D.quantity>0?(r+=D.quantity,o+=D.amount,c=!0):(n+=D.amount,m=!0)});let x=r>0?o/r:0,P=Ce[t]||0,b=r>0?r*P:0,u=P>0&&r>0?b-o:0,N=Math.max(0,o)+Math.max(0,n);return{totalQuantity:Math.max(0,r),totalCost:N,trackedCost:Math.max(0,o),untrackedCost:Math.max(0,n),avgPrice:x,currentPrice:P,currentValue:b,unrealizedPnL:u,realizedPnL:i,hasMixedEntries:c&&m,hasTrackedHoldings:c&&r>0}},_e=()=>{let t=0,s=0,r=!1,o=!1;return Ae.forEach(n=>{let i=Bt(n);t+=i.realizedPnL,s+=i.unrealizedPnL,i.hasMixedEntries&&(r=!0),i.hasTrackedHoldings&&(o=!0)}),{realized:t,unrealized:s,total:t+s,hasMixedEntries:r,hasTrackedHoldings:o}},Ln=t=>A.filter(s=>s.asset===t).sort((s,r)=>r.date-s.date),Xs=()=>Ae.map(t=>{let s=Bt(t);return{name:t,value:Math.max(0,s.totalCost)}}).filter(t=>t.value>0),jn=t=>{let s={};for(let r=0;r<12;r++)s[r]={buys:0,sells:0};return A.forEach(r=>{let o=new Date(r.date);if(o.getFullYear()===t){let n=o.getMonth();r.type==="sell"?s[n].sells+=r.amount:s[n].buys+=r.amount}}),s},Pr=()=>{if(!ut){q("expense-amount");return}let t=Date.now();te([...w,{id:t,amount:parseFloat(ut),category:us,date:xs,notes:Ga.trim()||null}]),sa(""),oa(""),Ke(t),setTimeout(()=>Ke(null),500),At("expense-total"),It("add-expense"),setTimeout(()=>Cr.current?.focus(),100)},Vs=t=>{let s=w.find(r=>r.id===t);s&&(se(r=>new Set([...r,t])),setTimeout(()=>{te(r=>r.filter(o=>o.id!==t)),se(r=>{let o=new Set(r);return o.delete(t),o}),Ea("expense",s,()=>{te(r=>[s,...r])})},400))},Zs=t=>w.filter(s=>{if(s.category!==t)return!1;let r=s.date.split("-");return parseInt(r[1])-1===xt&&parseInt(r[0])===bt}).reduce((s,r)=>s+r.amount,0),Rs=()=>w.filter(t=>{let s=t.date.split("-");return parseInt(s[1])-1===xt&&parseInt(s[0])===bt}).reduce((t,s)=>t+s.amount,0),Yn=()=>[...w].filter(t=>{let s=t.date.split("-");return parseInt(s[1])-1===xt&&parseInt(s[0])===bt}).sort((t,s)=>s.date.localeCompare(t.date)).slice(0,15),Or=()=>xe.map(t=>({name:t,value:Zs(t)})).filter(t=>t.value>0),zn=()=>{!Za.trim()||!Ra||(yt([...ae,{id:Date.now(),name:Za,amount:parseFloat(Ra),category:hs,dayOfMonth:parseInt(fs)}]),bs(""),ys(""),Va(!1))},Jn=t=>yt(ae.filter(s=>s.id!==t)),eo=()=>{let t=new Date,s=t.getDate(),r=t.getMonth(),o=t.getFullYear();return ae.map(n=>{let i=new Date(o,r,n.dayOfMonth);n.dayOfMonth<s&&(i=new Date(o,r+1,n.dayOfMonth));let c=Math.ceil((i-t)/(1e3*60*60*24)),m=c<0,x=c>=0&&c<=7;return{...n,dueDate:i,daysUntilDue:c,isOverdue:m,isDueSoon:x}}).filter(n=>n.isOverdue||n.isDueSoon).sort((n,i)=>n.daysUntilDue-i.daysUntilDue)},qn=()=>{let t=new Date,s=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=ae.map(n=>({id:Date.now()+Math.random(),amount:n.amount,category:n.category,date:`${s}-${r}-${String(n.dayOfMonth).padStart(2,"0")}`,recurringName:n.name}));te([...w,...o])},to=(t,s)=>{if(!t||!s)return 0;let[r,o]=t.split(":").map(Number),[n,i]=s.split(":").map(Number),c=r*60+o,m=n*60+i;return m<c&&(m+=1440),Math.round((m-c)/60*100)/100},ao=()=>{let t=new Date;t.setDate(t.getDate()-1);let s=t.toISOString().split("T")[0];return I.find(r=>r.date===s)},Wn=()=>{let t=ao();t&&(je(t.job),ft(t.description),ht(String(t.hours)),t.hourlyRate&&ia(String(t.hourlyRate)))},ro=()=>{let t=0;if(Je==="clock"){if(!$e){q("clock-in");return}if(!Ee){q("clock-out");return}if(t=to($e,Ee),t<=0){q("clock-out");return}}else{if(!na){q("work-hours");return}t=parseFloat(na)}if(!re){q("work-job");return}if(!la){q("work-desc");return}let s=Ye?parseFloat(Ye):ze[re]||0;ce([...I,{id:Date.now(),hours:t,job:re,description:la,date:vs,hourlyRate:s,clockIn:Je==="clock"?$e:null,clockOut:Je==="clock"?Ee:null}]),Ye&&parseFloat(Ye)>0&&da({...ze,[re]:parseFloat(Ye)}),ht(""),je(""),ft(""),ia(""),tr(""),ar(""),At("work-total"),It("add-work"),setTimeout(()=>$r.current?.focus(),100)},so=t=>{let s=I.find(r=>r.id===t);s&&(se(r=>new Set([...r,t])),setTimeout(()=>{ce(r=>r.filter(o=>o.id!==t)),se(r=>{let o=new Set(r);return o.delete(t),o}),Ea("worklog",s,()=>{ce(r=>[s,...r])})},400))},Ta=()=>[...new Set(I.map(t=>t.job))],Un=t=>I.filter(s=>{let r=s.date.split("-");return s.job===t&&parseInt(r[1])-1===vt&&parseInt(r[0])===kt}).reduce((s,r)=>s+r.hours,0),Hn=()=>I.filter(t=>{let s=t.date.split("-");return parseInt(s[1])-1===vt&&parseInt(s[0])===kt}).reduce((t,s)=>t+s.hours,0),Kn=()=>I.filter(t=>{let s=t.date.split("-");return parseInt(s[1])-1===vt&&parseInt(s[0])===kt}).reduce((t,s)=>t+s.hours*(s.hourlyRate||0),0),Qn=t=>I.filter(s=>{let r=s.date.split("-");return s.job===t&&parseInt(r[1])-1===vt&&parseInt(r[0])===kt}).sort((s,r)=>r.date.localeCompare(s.date)),oo=()=>{if(!ga.trim()){q("todo-text");return}let t=Date.now();V([...E,{id:t,text:ga,date:Ds,time:nr,completed:!1,priority:ir,linkedExpense:ge,subtasks:[]}]),or(""),lr(""),dr("medium"),pa(null),Ke(t),setTimeout(()=>Ke(null),500),It("add-todo"),setTimeout(()=>Er.current?.focus(),100)},Gn=t=>{let s=E.find(r=>r.id===t);if(s&&!s.completed&&s.linkedExpense){let r=Date.now();te([...w,{id:r,amount:s.linkedExpense.amount,category:s.linkedExpense.category,date:new Date().toISOString().split("T")[0],notes:`From task: ${s.text}`}]),At("expense-total")}V(E.map(r=>r.id===t?{...r,completed:!r.completed}:r))},_n=t=>{Ar(t,()=>V(E.filter(s=>s.id!==t)))},no=t=>{mr.trim()&&(V(E.map(s=>s.id===t?{...s,subtasks:[...s.subtasks,{id:Date.now(),text:mr,completed:!1}]}:s)),As(""),cr(null))},Xn=(t,s)=>{V(E.map(r=>r.id===t?{...r,subtasks:r.subtasks.map(o=>o.id===s?{...o,completed:!o.completed}:o)}:r))},Vn=(t,s)=>{V(E.map(r=>r.id===t?{...r,subtasks:r.subtasks.filter(o=>o.id!==s)}:r))},Zn=t=>{let s=E.find(o=>o.id===t);if(!s)return;let r=K.findIndex(o=>o.date===s.date);if(r>=0){let o=[...K];o[r].todos.push(s),qe(o)}else qe([...K,{date:s.date,archivedOn:new Date().toISOString(),todos:[s]}]);V(E.filter(o=>o.id!==t))},Rn=()=>{let t=E.filter(o=>o.completed);if(t.length===0)return;let s={};t.forEach(o=>{s[o.date]||(s[o.date]=[]),s[o.date].push(o)});let r=[...K];Object.keys(s).forEach(o=>{let n=r.findIndex(i=>i.date===o);n>=0?r[n].todos.push(...s[o]):r.push({date:o,archivedOn:new Date().toISOString(),todos:s[o]})}),qe(r),V(E.filter(o=>!o.completed))},el=()=>[...E].sort((t,s)=>t.date.localeCompare(s.date)),Fa=()=>{let t=new Date().toISOString().split("T")[0],s=E.filter(n=>n.completed).length,r=E.filter(n=>!n.completed&&n.date>=t).length,o=E.filter(n=>!n.completed&&n.date<t).length;return{completed:s,pending:r,overdue:o,total:E.length}},Ie=()=>{let t=[],s={...Ct},r=$t;for(;s.year<r.year||s.year===r.year&&s.month<=r.month;)t.push({...s,label:`${Dr[s.month]} ${s.year}`}),s.month++,s.month>11&&(s.month=0,s.year++);return t},lo=()=>Ie().map(t=>{let s=w.filter(r=>{let o=r.date.split("-");return parseInt(o[1])-1===t.month&&parseInt(o[0])===t.year}).reduce((r,o)=>r+o.amount,0);return{...t,total:s}}),io=()=>Ie().map(t=>{let s=f.filter(r=>{let o=r.date.split("-");return parseInt(o[1])-1===t.month&&parseInt(o[0])===t.year}).reduce((r,o)=>r+o.amount,0);return{...t,total:s}}),co=()=>Ie().map(t=>{let s=A.filter(i=>i.month===t.month&&i.year===t.year),r=s.filter(i=>i.type!=="sell").reduce((i,c)=>i+c.amount,0),o=s.filter(i=>i.type==="sell").reduce((i,c)=>i+c.amount,0),n=r-o;return{...t,buys:r,sells:o,net:n}}),Lr=()=>Ie().map(t=>{let s=I.filter(o=>{let n=o.date.split("-");return parseInt(n[1])-1===t.month&&parseInt(n[0])===t.year}).reduce((o,n)=>o+n.hours,0),r=I.filter(o=>{let n=o.date.split("-");return parseInt(n[1])-1===t.month&&parseInt(n[0])===t.year}).reduce((o,n)=>o+n.hours*(n.hourlyRate||0),0);return{...t,hours:s,earnings:r}}),tl=()=>Ie().map(s=>{let r=f.filter(n=>{let i=n.date.split("-");return parseInt(i[1])-1===s.month&&parseInt(i[0])===s.year}).reduce((n,i)=>n+i.amount,0),o=w.filter(n=>{let i=n.date.split("-");return parseInt(i[1])-1===s.month&&parseInt(i[0])===s.year}).reduce((n,i)=>n+i.amount,0);return{name:s.label,income:r,expenses:o,net:r-o}}),al=()=>Lr(),mo=()=>Ie().map(t=>{let s={...t};return xe.forEach(r=>{s[r]=w.filter(o=>{let n=o.date.split("-");return o.category===r&&parseInt(n[1])-1===t.month&&parseInt(n[0])===t.year}).reduce((o,n)=>o+n.amount,0)}),s}),M=()=>{let t=Br(),s=Ae.reduce((o,n)=>{let i=Bt(n),c=Ce[n]||(i.totalQuantity>0?i.totalCost/i.totalQuantity:0);return o+i.totalQuantity*c},0),r=Ft();return{checking:t,investments:s,totalAssets:t+s,debt:r,netWorth:t+s-r}},go=()=>Ie().map(t=>{let s=A.filter(m=>m.year<t.year||m.year===t.year&&m.month<=t.month),r={};s.forEach(m=>{r[m.asset]||(r[m.asset]={quantity:0,amount:0}),m.type==="sell"?(r[m.asset].quantity-=m.quantity||0,r[m.asset].amount-=m.amount):(r[m.asset].quantity+=m.quantity||0,r[m.asset].amount+=m.amount)});let o=Object.values(r).reduce((m,x)=>m+Math.max(0,x.amount),0),n=Br(),i=Ft(),c=n+o-i;return{...t,checking:n,investments:o,debt:i,netWorth:c}}),po=()=>{let t=[],s=new Date,r=s.getMonth(),o=s.getFullYear(),n=s.getDate(),i=new Date(o,r+1,0).getDate(),c=n,m=i-n,x=w.filter(g=>{let p=g.date.split("-");return parseInt(p[1])-1===r&&parseInt(p[0])===o}),P=f.filter(g=>{let p=g.date.split("-");return parseInt(p[1])-1===r&&parseInt(p[0])===o}),b=x.reduce((g,p)=>g+p.amount,0),u=P.reduce((g,p)=>g+p.amount,0),N=r===0?11:r-1,D=r===0?o-1:o,Xe=w.filter(g=>{let p=g.date.split("-");return parseInt(p[1])-1===N&&parseInt(p[0])===D}),Te=f.filter(g=>{let p=g.date.split("-");return parseInt(p[1])-1===N&&parseInt(p[0])===D}),Ba=Xe.reduce((g,p)=>g+p.amount,0),Fe=Te.reduce((g,p)=>g+p.amount,0),ne=u-b,Ve=u>0?ne/u*100:0;if((u>0||b>0)&&(ne>=0?t.push({type:"positive",icon:"\u{1F4B0}",title:"Net Income",message:`You're ${Ve>=20?"saving strong":"in the green"} this month!`,detail:`+${d(ne)} net (${Ve.toFixed(0)}% savings rate)`,priority:Ve>=20?1:2}):t.push({type:"warning",icon:"\u26A0\uFE0F",title:"Overspending",message:"You're spending more than you're earning this month.",detail:`${d(ne)} net - consider reducing expenses`,priority:1})),c>=5&&b>0){let g=b/c,p=g*i,z=g*m,Pt=u-p;t.push({type:Pt>=0?"info":"warning",icon:"\u{1F4C5}",title:"Month-End Projection",message:`At current pace, you'll spend ~${d(p)} this month.`,detail:`~${d(z)} more in remaining ${m} days`,priority:2})}if(xe.forEach(g=>{let p=x.filter(W=>W.category===g).reduce((W,Pt)=>W+Pt.amount,0),z=Xe.filter(W=>W.category===g).reduce((W,Pt)=>W+Pt.amount,0);if(z>0&&p>0){let W=(p-z)/z*100;W>=30?t.push({type:"warning",icon:J[g]?.icon||"\u{1F4E6}",title:`${g} Up`,message:`${g} spending is up ${W.toFixed(0)}% from last month.`,detail:`${d(z)} \u2192 ${d(p)}`,priority:3}):W<=-30&&t.push({type:"positive",icon:J[g]?.icon||"\u{1F4E6}",title:`${g} Down`,message:`Great job! ${g} spending is down ${Math.abs(W).toFixed(0)}%.`,detail:`${d(z)} \u2192 ${d(p)}`,priority:3})}}),c>=3&&b>0){let g=b/c,p=Ba/i;if(p>0){let z=(g-p)/p*100;z>=20?t.push({type:"warning",icon:"\u{1F525}",title:"Spending Faster",message:`Daily spending is ${z.toFixed(0)}% higher than last month's average.`,detail:`${d(p)}/day \u2192 ${d(g)}/day`,priority:2}):z<=-20&&t.push({type:"positive",icon:"\u{1F3AF}",title:"Spending Slower",message:`Daily spending is ${Math.abs(z).toFixed(0)}% lower than last month.`,detail:`${d(p)}/day \u2192 ${d(g)}/day`,priority:2})}}let uo=b/Math.max(x.length,1),xo=x.filter(g=>g.amount>uo*3&&g.amount>50);if(xo.length>0){let g=xo.sort((p,z)=>z.amount-p.amount)[0];t.push({type:"info",icon:"\u{1F440}",title:"Large Expense",message:`Notable expense: ${d(g.amount)} on ${g.category}.`,detail:g.notes||`This is ${(g.amount/uo).toFixed(1)}x your average expense`,priority:4})}if(Fe>0&&u>0){let g=(u-Fe)/Fe*100;Math.abs(g)>=15&&t.push({type:g>0?"positive":"info",icon:g>0?"\u{1F4C8}":"\u{1F4C9}",title:g>0?"Income Up":"Income Down",message:`Income is ${g>0?"up":"down"} ${Math.abs(g).toFixed(0)}% from last month.`,detail:`${d(Fe)} \u2192 ${d(u)}`,priority:2})}let bo=I.filter(g=>{let p=g.date.split("-");return parseInt(p[1])-1===r&&parseInt(p[0])===o}),Yr=bo.reduce((g,p)=>g+p.hours,0),zr=bo.reduce((g,p)=>g+p.hours*(p.hourlyRate||0),0);if(Yr>0&&zr>0){let g=zr/Yr;t.push({type:"info",icon:"\u23F0",title:"Work Summary",message:`You've logged ${Yr.toFixed(1)} hours this month.`,detail:`Earning ${d(g)}/hr avg \u2192 ${d(zr)} total`,priority:4})}return t.sort((g,p)=>g.priority-p.priority).slice(0,6)},jr=()=>{if(!We.trim())return[];let t=We.toLowerCase(),s=[];return w.forEach(r=>{let o=r.notes&&r.notes.toLowerCase().includes(t);(r.category.toLowerCase().includes(t)||String(r.amount).includes(t)||o)&&s.push({type:"expense",display:`${J[r.category]?.icon||"\u{1F4E6}"} ${d(r.amount)} - ${r.category}${r.notes?` (${r.notes})`:""}`,date:r.date})}),f.forEach(r=>{let o=r.notes&&r.notes.toLowerCase().includes(t);(r.name.toLowerCase().includes(t)||String(r.amount).includes(t)||o)&&s.push({type:"income",display:`\u{1F4B0} ${d(r.amount)} - ${r.name}${r.notes?` (${r.notes})`:""}`,date:r.date})}),I.forEach(r=>{(r.job.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))&&s.push({type:"work",display:`\u23F0 ${r.hours}h - ${r.job}`,date:r.date})}),E.forEach(r=>{r.text.toLowerCase().includes(t)&&s.push({type:"todo",display:`${r.completed?"\u2705":"\u2B1C"} ${r.text}`,date:r.date})}),s.slice(0,10)},rl=()=>e.createElement("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden"},Array.from({length:50}).map((t,s)=>e.createElement("div",{key:s,className:"absolute w-3 h-3 rounded-full",style:{left:`${Math.random()*100}%`,top:"-10px",backgroundColor:Qe[Math.floor(Math.random()*Qe.length)],animation:`confettiDrop ${2+Math.random()*2}s linear forwards`,animationDelay:`${Math.random()*.5}s`}}))),sl=({achievement:t})=>e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none"},e.createElement("div",{className:"achievement-unlock bg-white rounded-3xl p-8 shadow-2xl border-4 border-yellow-400 text-center"},e.createElement("div",{className:"text-6xl mb-4"},t.icon),e.createElement("p",{className:"text-sm font-bold text-yellow-600 mb-1"},"\u{1F389} Achievement Unlocked!"),e.createElement("h3",{className:"text-2xl font-black text-gray-800"},t.name),e.createElement("p",{className:"text-gray-500 mt-2"},t.description))),ol=()=>e.createElement("div",{className:"fixed bottom-4 left-4 z-40 cursor-pointer",onClick:()=>Sr(!1)},e.createElement("div",{className:"fade-in-up flex items-end gap-3"},e.createElement("div",{className:"character-bounce"},e.createElement("svg",{width:"80",height:"100",viewBox:"0 0 80 100"},e.createElement("ellipse",{cx:"40",cy:"70",rx:"25",ry:"20",fill:"#FF6B9D"}),e.createElement("circle",{cx:"40",cy:"35",r:"25",fill:"#FFD93D"}),e.createElement("ellipse",{cx:"32",cy:"32",rx:"5",ry:"6",fill:"white"}),e.createElement("ellipse",{cx:"48",cy:"32",rx:"5",ry:"6",fill:"white"}),e.createElement("circle",{cx:"34",cy:"33",r:"2.5",fill:"#2D2A3E"}),e.createElement("circle",{cx:"50",cy:"33",r:"2.5",fill:"#2D2A3E"}),e.createElement("path",{d:"M32 45 Q40 55 48 45",stroke:"#2D2A3E",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),e.createElement("circle",{cx:"22",cy:"40",r:"4",fill:"#FFB6C1",opacity:"0.6"}),e.createElement("circle",{cx:"58",cy:"40",r:"4",fill:"#FFB6C1",opacity:"0.6"}),e.createElement("ellipse",{cx:"28",cy:"88",rx:"10",ry:"7",fill:"#E5598A"}),e.createElement("ellipse",{cx:"52",cy:"88",rx:"10",ry:"7",fill:"#E5598A"}))),e.createElement("div",{className:`rounded-2xl p-4 shadow-xl border-2 max-w-xs slide-in-right ${a?"bg-[#252233] border-pink-400/30":"bg-white border-pink-200"}`},e.createElement("p",{className:`font-bold ${a?"text-gray-100":"text-gray-700"}`},nn),e.createElement("p",{className:`text-xs mt-2 ${a?"text-gray-500":"text-gray-400"}`},"Tap to dismiss"))));return $?e.createElement("div",{className:`min-h-screen flex items-center justify-center ${a?"bg-gradient-to-br from-[#1A1625] via-[#1E1B2E] to-[#1A2025]":"bg-gradient-to-br from-pink-100 via-purple-50 to-blue-100"}`},e.createElement("div",{className:"text-center"},e.createElement("div",{className:"text-6xl character-bounce mb-4"},"\u{1F4B0}"),e.createElement("p",{className:`text-xl font-bold ${a?"text-gray-300":"text-gray-600"}`},"Loading your finances..."))):e.createElement(e.Fragment,null,e.createElement("style",null,wl),e.createElement("div",{className:`${a?"dark-mode":""}`},e.createElement("div",{className:"app-container min-h-screen p-4 sm:p-6 relative pb-24"},e.createElement("header",{className:"max-w-6xl mx-auto mb-8"},e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center shadow-lg shadow-pink-300/50"},e.createElement(bl,{className:"w-7 h-7 text-white"})),e.createElement("div",null,e.createElement("h1",{className:"text-2xl sm:text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500"},"Money Buddy"),e.createElement("p",{className:"text-sm font-medium text-gray-400"},"Your cheerful finance tracker"))),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{onClick:()=>C(!a),className:`dark-mode-toggle w-10 h-10 rounded-xl flex items-center justify-center transition-all ${a?"bg-yellow-400/20 text-yellow-400 hover:bg-yellow-400/30":"bg-indigo-100 text-indigo-500 hover:bg-indigo-200"}`,title:a?"Switch to Light Mode":"Switch to Dark Mode"},a?e.createElement(vl,{className:"w-5 h-5"}):e.createElement(fl,{className:"w-5 h-5"})),e.createElement(v,{variant:"ghost",size:"sm",onClick:()=>hr(!0)},e.createElement(ho,{className:"w-4 h-4"}),e.createElement("span",{className:"hidden sm:inline"},Se.length,"/",Na.length)),e.createElement(v,{variant:"ghost",size:"sm",onClick:mn,className:Qo?"save-pulse":""},e.createElement(il,{className:"w-4 h-4"})),e.createElement(v,{variant:"ghost",size:"sm",onClick:()=>ur(!0)},e.createElement(dl,{className:"w-4 h-4"})))),e.createElement("div",{className:"mt-4 max-w-md relative"},e.createElement("div",{className:`flex items-center rounded-2xl shadow-lg border-2 overflow-hidden transition-colors duration-300 ${a?"bg-[#1E1B2E] border-[#3D3A4E]":"bg-white/80 border-white/50"}`},e.createElement(ml,{className:`w-5 h-5 ml-4 ${a?"text-gray-500":"text-gray-400"}`}),e.createElement("input",{type:"text",placeholder:"Search your finances...",value:We,onChange:t=>{br(t.target.value),Et(t.target.value.length>0)},onFocus:()=>We&&Et(!0),onBlur:()=>setTimeout(()=>Et(!1),200),className:`flex-1 px-3 py-3 bg-transparent outline-none ${a?"text-gray-100 placeholder-gray-500":"text-gray-700 placeholder-gray-400"}`}),We&&e.createElement("button",{onClick:()=>{br(""),Et(!1)},className:`pr-4 ${a?"text-gray-500 hover:text-gray-300":"text-gray-400 hover:text-gray-600"}`},e.createElement(F,{className:"w-5 h-5"}))),Go&&We&&e.createElement("div",{className:`absolute top-full left-0 right-0 mt-2 rounded-2xl shadow-2xl border-2 overflow-hidden z-30 fade-in-up ${a?"bg-[#252233] border-[#3D3A4E]":"bg-white border-gray-100"}`},jr().length>0?e.createElement("div",{className:"max-h-80 overflow-y-auto"},e.createElement("div",{className:`px-4 py-2 text-xs font-bold uppercase tracking-wide ${a?"bg-[#1E1B2E] text-gray-400":"bg-gray-50 text-gray-500"}`},jr().length," results"),jr().map((t,s)=>e.createElement("div",{key:s,className:`px-4 py-3 cursor-pointer border-b last:border-0 transition-colors ${a?"hover:bg-pink-900/20 border-[#3D3A4E]":"hover:bg-pink-50 border-gray-50"}`,onMouseDown:()=>{t.type==="expense"?h("budget"):t.type==="income"?h("income"):t.type==="work"?h("clockin"):t.type==="todo"&&h("todos"),Et(!1),br("")}},e.createElement("p",{className:`font-medium ${a?"text-gray-200":"text-gray-700"}`},t.display),e.createElement("p",{className:`text-xs mt-1 ${a?"text-gray-500":"text-gray-400"}`},ye(t.date))))):e.createElement("div",{className:"px-4 py-8 text-center"},e.createElement("p",{className:a?"text-gray-500":"text-gray-400"},"No results found"))))),e.createElement("nav",{className:"max-w-6xl mx-auto mb-8"},e.createElement("div",{className:`flex gap-1 sm:gap-2 p-2 rounded-3xl overflow-x-auto shadow-lg border-2 transition-colors duration-300 ${a?"bg-[#1E1B2E] border-[#3D3A4E]":"bg-gray-100 border-gray-200"}`},e.createElement(at,{darkMode:a,active:y==="income",onClick:()=>h("income"),icon:e.createElement(Pa,{className:"w-5 h-5"}),label:"Income"}),e.createElement(at,{darkMode:a,active:y==="investments",onClick:()=>h("investments"),icon:e.createElement(cl,{className:"w-5 h-5"}),label:"Invest"}),e.createElement(at,{darkMode:a,active:y==="budget",onClick:()=>h("budget"),icon:e.createElement(yo,{className:"w-5 h-5"}),label:"Budget"}),e.createElement(at,{darkMode:a,active:y==="clockin",onClick:()=>h("clockin"),icon:e.createElement(ko,{className:"w-5 h-5"}),label:"Work"}),e.createElement(at,{darkMode:a,active:y==="todos",onClick:()=>h("todos"),icon:e.createElement(No,{className:"w-5 h-5"}),label:"Tasks"}),e.createElement(at,{darkMode:a,active:y==="trends",onClick:()=>h("trends"),icon:e.createElement(yl,{className:"w-5 h-5"}),label:"Trends"}))),e.createElement("main",{className:"max-w-6xl mx-auto",ref:sn,onTouchStart:pn,onTouchMove:un,onTouchEnd:xn},y==="income"&&e.createElement("div",{className:`space-y-6 tab-content ${G==="left"?"slide-left-exit":G==="right"?"slide-right-exit":"active"}`},e.createElement(k,{darkMode:a},e.createElement("h2",{className:`text-xl font-black mb-4 flex items-center gap-2 ${a?"text-gray-100":"text-gray-700"}`},e.createElement("span",{className:"text-2xl"},"\u{1F4B8}")," Add Income"),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},e.createElement("div",null,e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("div",{className:`flex rounded-xl overflow-hidden border-2 ${a?"border-[#3D3A4E]":"border-gray-200"}`},e.createElement("button",{onClick:()=>_r("manual"),className:`px-3 py-1 text-xs font-bold transition-all ${st==="manual"?"bg-gradient-to-r from-purple-400 to-pink-400 text-white":a?"text-gray-400 hover:bg-white/5":"text-gray-500 hover:bg-gray-50"}`},"Source Name"),e.createElement("button",{onClick:()=>_r("quick"),className:`px-3 py-1 text-xs font-bold transition-all ${st==="quick"?"bg-gradient-to-r from-purple-400 to-pink-400 text-white":a?"text-gray-400 hover:bg-white/5":"text-gray-500 hover:bg-gray-50"}`},"Quick Sources"))),st==="manual"&&e.createElement(e.Fragment,null,e.createElement("input",{ref:Nr,id:"income-name",placeholder:"e.g., Freelance gig",value:H,onChange:t=>Pe(t.target.value),onKeyDown:t=>(t.key==="Enter"||t.keyCode===13)&&Da(),list:"income-names",className:`candy-input ${a?"candy-input-dark":"candy-input-light"} ${Q==="income-name"?"shake border-red-400":""}`}),e.createElement("datalist",{id:"income-names"},Ma().map(t=>e.createElement("option",{key:t,value:t})))),st==="quick"&&e.createElement("div",{className:"flex gap-2"},ot.map((t,s)=>e.createElement("div",{key:s,className:"flex-1 relative group"},Xr===s?e.createElement("input",{autoFocus:!0,type:"text",value:t,onChange:r=>{let o=[...ot];o[s]=r.target.value,Ht(o)},onBlur:()=>Kt(null),onKeyDown:r=>{r.key==="Enter"&&Kt(null)},className:`w-full px-2 py-2.5 text-xs font-bold rounded-xl outline-none text-center ${a?"bg-[#252233] text-gray-100 border-2 border-purple-500":"bg-white text-gray-700 border-2 border-purple-400"}`}):e.createElement("button",{onClick:()=>Pe(t),onTouchEnd:r=>{r.preventDefault(),Pe(t)},onDoubleClick:()=>Kt(s),className:`w-full px-2 py-2.5 text-xs font-bold rounded-xl transition-all press-feedback ${H===t?"bg-gradient-to-r from-purple-400 to-pink-400 text-white shadow-lg scale-105":a?"bg-[#252233] text-gray-300 hover:bg-[#2D2A3E] border-2 border-[#3D3A4E]":"bg-gray-100 text-gray-600 hover:bg-gray-200 border-2 border-gray-200"}`},t),Xr!==s&&e.createElement("div",{onClick:()=>Kt(s),className:`absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity ${a?"bg-purple-600 text-white":"bg-purple-400 text-white"}`},e.createElement(Oa,{className:"w-2.5 h-2.5"}))))),st==="quick"&&H&&e.createElement("div",{className:`mt-2 text-xs ${a?"text-gray-500":"text-gray-400"}`},"Selected: ",e.createElement("span",{className:`font-bold ${a?"text-purple-400":"text-purple-500"}`},H))),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Notes ",e.createElement("span",{className:`font-normal ${a?"text-gray-600":"text-gray-400"}`},"(optional)")),e.createElement("input",{placeholder:"What was this for?",value:La,onChange:t=>Jt(t.target.value),onKeyDown:t=>(t.key==="Enter"||t.keyCode===13)&&Da(),className:`candy-input ${a?"candy-input-dark":"candy-input-light"}`})),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Amount ($)"),e.createElement("input",{id:"income-amount",type:"text",inputMode:"decimal",placeholder:"100",value:rt?wa(rt):"",onChange:t=>zt(Ca(t.target.value)),onKeyDown:t=>(t.key==="Enter"||t.keyCode===13)&&Da(),className:`candy-input ${a?"candy-input-dark":"candy-input-light"} ${Q==="income-amount"?"shake border-red-400":""}`})),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Date"),e.createElement(Hr,{darkMode:a,value:Qr,onChange:t=>ja(t.target.value)}))),e.createElement("div",{className:"mt-4 flex justify-end gap-2"},(H||rt||La)&&e.createElement(v,{variant:"ghost",size:"sm",onClick:yn,className:"press-feedback"},e.createElement(F,{className:"w-4 h-4"})," Clear"),e.createElement(v,{onClick:Da,className:`btn-press ${T==="add-income"?"success-flash":""}`},T==="add-income"?e.createElement(le,{className:"w-5 h-5"}):e.createElement(fe,{className:"w-5 h-5"}),T==="add-income"?"Added!":"Add Income"))),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},e.createElement(O,{darkMode:a,icon:e.createElement(Pa,{className:"w-6 h-6"}),label:"This Month",value:d(Cn()),color:"green",pop:ha==="income-total"}),e.createElement(O,{darkMode:a,icon:e.createElement(gl,{className:"w-6 h-6"}),label:"Annual (selected)",value:d($n()),color:"purple"}),e.createElement(O,{darkMode:a,icon:e.createElement(Ot,{className:"w-6 h-6"}),label:"All Time",value:d(f.reduce((t,s)=>t+s.amount,0)),color:"blue"})),e.createElement(k,{darkMode:a},e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4"},e.createElement("h2",{className:`text-xl font-black flex items-center gap-2 ${a?"text-gray-100":"text-gray-700"}`},e.createElement("span",{className:"text-2xl"},"\u{1F4CA}")," Income by Source"),e.createElement(tt,{month:qt,year:Wt,setMonth:Eo,setYear:So,darkMode:a,variant:"purple"})),Ma().length===0?e.createElement(R,{darkMode:a,icon:"\u{1F4B0}",title:"No income yet",subtitle:"Add your first income to get started!"}):e.createElement("div",{className:"space-y-3"},Ma().map(t=>{let s=wn(t),r=Nn(t),o=Gr[t],n=Ne.includes(t);return e.createElement("div",{key:t,className:`rounded-2xl border-2 overflow-hidden transition-all ${n?a?"border-purple-700 bg-purple-900/20":"border-purple-200 bg-purple-50/50":a?"border-[#3D3A4E] bg-[#252233]":"border-gray-100 bg-white"}`},e.createElement("div",{className:`flex items-center justify-between p-4 cursor-pointer transition-colors press-feedback ${a?"hover:bg-white/5":"hover:bg-gray-50/50"}`,onClick:()=>Do({...Gr,[t]:!o})},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center transition-transform duration-300 ${o?"rotate-90":""} ${o?a?"bg-pink-900/30":"bg-pink-100":a?"bg-[#2D2A3E]":"bg-gray-100"}`},e.createElement(Ze,{className:`w-5 h-5 ${o?"text-pink-500":a?"text-gray-500":"text-gray-400"}`})),e.createElement("div",null,e.createElement("p",{className:`font-bold ${a?"text-gray-100":"text-gray-700"}`},t),e.createElement("p",{className:`text-sm ${a?"text-gray-500":"text-gray-400"}`},r.length," entries"))),e.createElement("div",{className:"flex items-center gap-3"},e.createElement("button",{onClick:i=>{i.stopPropagation(),Ut(n?Ne.filter(c=>c!==t):[...Ne,t])},className:`px-3 py-1 rounded-full text-xs font-bold transition-all ${n?a?"bg-purple-900/50 text-purple-300":"bg-purple-200 text-purple-700":a?"bg-[#2D2A3E] text-gray-400 hover:bg-purple-900/30":"bg-gray-100 text-gray-500 hover:bg-purple-100"}`},n?"\u2713 Annual":"Add to Annual"),e.createElement("span",{className:"text-xl font-black text-emerald-500"},d(s)))),e.createElement("div",{className:`accordion-content ${o?"expanded":""}`},e.createElement("div",null,r.length>0&&e.createElement("div",{className:`border-t ${a?"border-[#3D3A4E] bg-[#1E1B2E]/50":"border-gray-100 bg-gray-50/50"}`},r.map(i=>e.createElement("div",{key:i.id,className:`flex items-center justify-between px-4 py-3 border-b last:border-0 ${De.has(i.id)?"delete-animation":""} ${a?"border-[#3D3A4E]":"border-gray-100"} ${ya===i.id?"fade-in-up":""} ${ya===i.id?a?"bg-emerald-900/20":"bg-emerald-50":""}`,onTouchStart:c=>be(c,"income",i),onTouchEnd:_,onTouchMove:Sa,onMouseDown:c=>be(c,"income",i),onMouseUp:_,onMouseLeave:_},e.createElement("div",{className:"flex-1"},e.createElement("span",{className:"text-sm text-gray-500"},ye(i.date)),i.notes&&e.createElement("p",{className:`text-xs mt-1 italic ${a?"text-gray-500":"text-gray-400"}`},'"',i.notes,'"')),e.createElement("div",{className:"flex items-center gap-3"},e.createElement("span",{className:`font-bold ${a?"text-gray-100":"text-gray-700"}`},d(i.amount)),e.createElement("button",{onClick:()=>Gs(i.id),className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors touch-target press-feedback ${a?"bg-red-900/30 text-red-400 hover:bg-red-900/50":"bg-red-100 text-red-500 hover:bg-red-200"}`},e.createElement(F,{className:"w-5 h-5"})))))))))}))),e.createElement(k,{darkMode:a},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("h2",{className:`text-xl font-black flex items-center gap-2 ${a?"text-gray-100":"text-gray-700"}`},e.createElement("span",{className:"text-2xl"},"\u{1F3E6}")," Accounts & Debt"),e.createElement(v,{variant:"ghost",size:"sm",onClick:()=>Gt(!0)},e.createElement(fe,{className:"w-4 h-4"})," Add Account")),(j.length>0||Y.length>0)&&e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 mb-4"},e.createElement("div",{className:`p-3 rounded-xl text-center ${a?"bg-emerald-900/20":"bg-emerald-50"}`},e.createElement("p",{className:`text-xs font-medium ${a?"text-gray-400":"text-gray-500"}`},"Checking"),e.createElement("p",{className:"text-lg font-bold text-emerald-500"},d(Br()))),e.createElement("div",{className:`p-3 rounded-xl text-center ${a?"bg-rose-900/20":"bg-rose-50"}`},e.createElement("p",{className:`text-xs font-medium ${a?"text-gray-400":"text-gray-500"}`},"Total Debt"),e.createElement("p",{className:"text-lg font-bold text-rose-500"},d(Ft()))),e.createElement("div",{className:`p-3 rounded-xl text-center ${a?"bg-blue-900/20":"bg-blue-50"}`},e.createElement("p",{className:`text-xs font-medium ${a?"text-gray-400":"text-gray-500"}`},"Credit Limit"),e.createElement("p",{className:"text-lg font-bold text-blue-500"},d(Aa()))),e.createElement("div",{className:`p-3 rounded-xl text-center ${a?"bg-purple-900/20":"bg-purple-50"}`},e.createElement("p",{className:`text-xs font-medium ${a?"text-gray-400":"text-gray-500"}`},"Available Credit"),e.createElement("p",{className:"text-lg font-bold text-purple-500"},d(Aa()-Ft()))),e.createElement("div",{className:`p-3 rounded-xl text-center ${Tr()>30?a?"bg-amber-900/20":"bg-amber-50":a?"bg-emerald-900/20":"bg-emerald-50"}`},e.createElement("p",{className:`text-xs font-medium ${a?"text-gray-400":"text-gray-500"}`},"Utilization"),e.createElement("p",{className:`text-lg font-bold ${Tr()>30?"text-amber-500":"text-emerald-500"}`},Aa()>0?Tr().toFixed(0):0,"%"))),Y.length>0&&e.createElement("div",{className:"mb-4"},e.createElement("h3",{className:`text-sm font-bold mb-3 flex items-center gap-2 ${a?"text-gray-400":"text-gray-500"}`},"\u{1F4B5} Checking Accounts"),e.createElement("div",{className:"space-y-3"},Y.map((t,s)=>{let r=Fr[t.colorIndex||s%Fr.length],o=Qt[`debit-${t.id}`];return e.createElement("div",{key:t.id,className:`rounded-2xl border-2 overflow-hidden transition-all ${De.has(t.id)?"delete-animation":""} ${a?"border-[#3D3A4E]":"border-gray-100"}`},e.createElement("div",{onClick:()=>Vr({...Qt,[`debit-${t.id}`]:!o}),className:`p-4 cursor-pointer transition-colors press-feedback ${a?"hover:bg-white/5":"hover:bg-gray-50"}`},e.createElement("div",{className:"flex items-center gap-4"},e.createElement("div",{className:`w-12 h-8 rounded-lg bg-gradient-to-br ${r.bg} flex items-center justify-center shadow-lg relative overflow-hidden`},e.createElement("div",{className:"absolute inset-0 bg-white/10 rounded-lg"}),e.createElement("span",{className:"text-sm"},"\u{1F4B5}\u{1F4B8}")),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("h4",{className:`font-bold truncate ${a?"text-gray-100":"text-gray-700"}`},t.name),e.createElement("p",{className:`text-sm ${a?"text-gray-500":"text-gray-400"}`},"Checking Account")),e.createElement("div",{className:"text-right"},e.createElement("p",{className:"text-lg font-bold text-emerald-500"},d(t.balance))),e.createElement(Ze,{className:`w-5 h-5 transition-transform ${o?"rotate-90":""} ${a?"text-gray-500":"text-gray-400"}`}))),e.createElement("div",{className:`accordion-content ${o?"expanded":""}`},e.createElement("div",{className:`p-4 pt-0 border-t-2 ${a?"border-[#3D3A4E]":"border-gray-100"}`},t.transactions&&t.transactions.length>0&&e.createElement("div",{className:"mt-4"},e.createElement("p",{className:`text-xs font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Recent Transactions"),e.createElement("div",{className:"space-y-1"},t.transactions.slice(-5).reverse().map(n=>e.createElement("div",{key:n.id,className:`flex justify-between text-sm ${a?"text-gray-400":"text-gray-500"}`},e.createElement("span",null,ye(n.date)),e.createElement("span",{className:n.type==="deposit"?"text-emerald-500 font-medium":"text-rose-500 font-medium"},n.type==="deposit"?"+":"-",d(n.amount)))))),e.createElement("div",{className:"flex gap-2 mt-4"},e.createElement("button",{onClick:n=>{n.stopPropagation(),Ua(t.id)},className:`flex-1 py-2 px-3 rounded-xl text-sm font-bold transition-all ${a?"bg-emerald-900/30 text-emerald-400 hover:bg-emerald-900/50":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`},"\u{1F4B0} Deposit"),e.createElement("button",{onClick:n=>{n.stopPropagation(),Tn(t.id)},className:`py-2 px-3 rounded-xl text-sm font-bold transition-all ${a?"bg-rose-900/30 text-rose-400 hover:bg-rose-900/50":"bg-rose-50 text-rose-600 hover:bg-rose-100"}`},e.createElement(F,{className:"w-4 h-4"}))))))}))),j.length>0&&e.createElement("div",null,e.createElement("h3",{className:`text-sm font-bold mb-3 flex items-center gap-2 ${a?"text-gray-400":"text-gray-500"}`},"\u{1F4B3} Credit Cards"),e.createElement("div",{className:"space-y-3"},j.map((t,s)=>{let r=Ir[t.colorIndex||s%Ir.length],o=Qt[t.id],{dueDate:n,daysUntil:i}=Mn(t),c=An(t),m=t.creditLimit>0?t.balance/t.creditLimit*100:0;return e.createElement("div",{key:t.id,className:`rounded-2xl border-2 overflow-hidden transition-all ${De.has(t.id)?"delete-animation":""} ${a?"border-[#3D3A4E]":"border-gray-100"}`},e.createElement("div",{onClick:()=>Vr({...Qt,[t.id]:!o}),className:`p-4 cursor-pointer transition-colors press-feedback ${a?"hover:bg-white/5":"hover:bg-gray-50"}`},e.createElement("div",{className:"flex items-center gap-4"},e.createElement("div",{className:`w-12 h-8 rounded-lg bg-gradient-to-br ${r.bg} flex items-center justify-center shadow-lg relative overflow-hidden`},e.createElement("div",{className:"absolute inset-0 bg-white/10 rounded-lg"}),e.createElement("span",{className:"text-white text-xs font-bold"},"\u{1F4B3}")),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("h4",{className:`font-bold truncate ${a?"text-gray-100":"text-gray-700"}`},t.name),i<=7&&e.createElement("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${i<=3?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400"}`},i===0?"Due today!":i===1?"Due tomorrow":`Due in ${i}d`)),e.createElement("p",{className:`text-sm ${a?"text-gray-500":"text-gray-400"}`},d(t.balance)," / ",d(t.creditLimit))),e.createElement("div",{className:"text-right"},e.createElement("p",{className:"text-lg font-bold text-rose-500"},d(t.balance)),e.createElement("p",{className:`text-xs ${m>30?"text-amber-500":"text-emerald-500"}`},m.toFixed(0),"% used")),e.createElement(Ze,{className:`w-5 h-5 transition-transform ${o?"rotate-90":""} ${a?"text-gray-500":"text-gray-400"}`})),e.createElement("div",{className:`mt-3 h-2 rounded-full overflow-hidden ${a?"bg-[#1E1B2E]":"bg-gray-100"}`},e.createElement("div",{className:`h-full rounded-full transition-all ${m>50?"bg-rose-500":m>30?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(100,m)}%`}}))),e.createElement("div",{className:`accordion-content ${o?"expanded":""}`},e.createElement("div",{className:`p-4 pt-0 border-t-2 ${a?"border-[#3D3A4E]":"border-gray-100"}`},e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mt-4"},e.createElement("div",{className:`p-2 rounded-xl text-center ${a?"bg-[#1E1B2E]":"bg-gray-50"}`},e.createElement("p",{className:`text-xs ${a?"text-gray-500":"text-gray-400"}`},"APR"),e.createElement("p",{className:`font-bold ${a?"text-gray-200":"text-gray-700"}`},t.apr,"%")),e.createElement("div",{className:`p-2 rounded-xl text-center ${a?"bg-[#1E1B2E]":"bg-gray-50"}`},e.createElement("p",{className:`text-xs ${a?"text-gray-500":"text-gray-400"}`},"Min Payment"),e.createElement("p",{className:`font-bold ${a?"text-gray-200":"text-gray-700"}`},d(t.minPayment))),e.createElement("div",{className:`p-2 rounded-xl text-center ${a?"bg-[#1E1B2E]":"bg-gray-50"}`},e.createElement("p",{className:`text-xs ${a?"text-gray-500":"text-gray-400"}`},"Due Date"),e.createElement("p",{className:`font-bold ${a?"text-gray-200":"text-gray-700"}`},"Day ",t.dueDay)),e.createElement("div",{className:`p-2 rounded-xl text-center ${a?"bg-[#1E1B2E]":"bg-gray-50"}`},e.createElement("p",{className:`text-xs ${a?"text-gray-500":"text-gray-400"}`},"Payoff Time"),e.createElement("p",{className:`font-bold ${c&&c.months===-1?"text-rose-500":a?"text-gray-200":"text-gray-700"}`},t.balance<=0?"Paid off! \u{1F389}":c?c.message:"N/A"))),t.payments&&t.payments.length>0&&e.createElement("div",{className:"mt-4"},e.createElement("p",{className:`text-xs font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Recent Payments"),e.createElement("div",{className:"space-y-1"},t.payments.slice(-3).reverse().map(x=>e.createElement("div",{key:x.id,className:`flex justify-between text-sm ${a?"text-gray-400":"text-gray-500"}`},e.createElement("span",null,ye(x.date)),e.createElement("span",{className:"text-emerald-500 font-medium"},"-",d(x.amount)))))),e.createElement("div",{className:"flex gap-2 mt-4"},e.createElement("button",{onClick:x=>{x.stopPropagation(),qa(t.id)},className:`flex-1 py-2 px-3 rounded-xl text-sm font-bold transition-all ${a?"bg-emerald-900/30 text-emerald-400 hover:bg-emerald-900/50":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`},"\u{1F4B5} Make Payment"),e.createElement("button",{onClick:x=>{x.stopPropagation(),Sn(t.id)},className:`py-2 px-3 rounded-xl text-sm font-bold transition-all ${a?"bg-rose-900/30 text-rose-400 hover:bg-rose-900/50":"bg-rose-50 text-rose-600 hover:bg-rose-100"}`},e.createElement(F,{className:"w-4 h-4"}))))))}))),j.length===0&&Y.length===0&&e.createElement("div",{className:`text-center py-8 rounded-2xl ${a?"bg-[#1E1B2E]":"bg-gray-50"}`},e.createElement("span",{className:"text-4xl mb-3 block"},"\u{1F3E6}"),e.createElement("p",{className:`font-bold ${a?"text-gray-300":"text-gray-600"}`},"No accounts tracked"),e.createElement("p",{className:`text-sm mt-1 ${a?"text-gray-500":"text-gray-400"}`},"Add checking accounts or credit cards to track your finances")))),y==="investments"&&e.createElement("div",{className:`space-y-6 tab-content ${G==="left"?"slide-left-exit":G==="right"?"slide-right-exit":"active"}`},e.createElement(k,{darkMode:a},e.createElement("h2",{className:`text-xl font-black mb-4 flex items-center gap-2 ${a?"text-gray-100":"text-gray-700"}`},e.createElement("span",{className:"text-2xl"},oe==="buy"?"\u{1F4C8}":"\u{1F4C9}")," ",oe==="buy"?"Buy":"Sell"," Investment"),e.createElement("div",{className:"flex gap-2 mb-4"},e.createElement("button",{onClick:()=>Rt("buy"),className:`flex-1 py-3 px-4 rounded-2xl font-bold transition-all ${oe==="buy"?"bg-gradient-to-r from-emerald-400 to-teal-500 text-white shadow-lg":a?"bg-[#1E1B2E] text-gray-400 hover:text-gray-200":"bg-gray-100 text-gray-500 hover:text-gray-700"}`},e.createElement(Ot,{className:"w-4 h-4 inline mr-2"}),"Buy"),e.createElement("button",{onClick:()=>Rt("sell"),className:`flex-1 py-3 px-4 rounded-2xl font-bold transition-all ${oe==="sell"?"bg-gradient-to-r from-rose-400 to-pink-500 text-white shadow-lg":a?"bg-[#1E1B2E] text-gray-400 hover:text-gray-200":"bg-gray-100 text-gray-500 hover:text-gray-700"}`},e.createElement(Ot,{className:"w-4 h-4 inline mr-2 rotate-180"}),"Sell")),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4"},e.createElement("div",{className:"lg:col-span-2"},e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("div",{className:`flex rounded-xl overflow-hidden border-2 ${a?"border-[#3D3A4E]":"border-gray-200"}`},e.createElement("button",{onClick:()=>gs("manual"),className:`px-3 py-1 text-xs font-bold transition-all ${gt==="manual"?"bg-gradient-to-r from-purple-400 to-pink-400 text-white":a?"text-gray-400 hover:bg-white/5":"text-gray-500 hover:bg-gray-50"}`},"Asset Name"),e.createElement("button",{onClick:()=>gs("quick"),className:`px-3 py-1 text-xs font-bold transition-all ${gt==="quick"?"bg-gradient-to-r from-purple-400 to-pink-400 text-white":a?"text-gray-400 hover:bg-white/5":"text-gray-500 hover:bg-gray-50"}`},"Quick Assets"))),gt==="manual"&&e.createElement(e.Fragment,null,e.createElement("input",{ref:wr,id:"invest-asset",placeholder:"e.g., AAPL, Bitcoin, ETF",value:de,onChange:t=>ct(t.target.value),onKeyDown:t=>(t.key==="Enter"||t.keyCode===13)&&Ia(),list:"asset-names",className:`candy-input ${a?"candy-input-dark":"candy-input-light"} ${Q==="invest-asset"?"shake border-red-400":""}`}),e.createElement("datalist",{id:"asset-names"},Ae.map(t=>e.createElement("option",{key:t,value:t})))),gt==="quick"&&e.createElement("div",{className:"flex gap-2"},pt.map((t,s)=>e.createElement("div",{key:s,className:"flex-1 relative group"},ps===s?e.createElement("input",{autoFocus:!0,type:"text",value:t,onChange:r=>{let o=[...pt];o[s]=r.target.value,aa(o)},onBlur:()=>ra(null),onKeyDown:r=>{r.key==="Enter"&&ra(null)},className:`w-full px-3 py-2.5 text-sm font-bold rounded-xl outline-none text-center ${a?"bg-[#252233] text-gray-100 border-2 border-purple-500":"bg-white text-gray-700 border-2 border-purple-400"}`}):e.createElement("button",{onClick:()=>ct(t),onTouchEnd:r=>{r.preventDefault(),ct(t)},onDoubleClick:()=>ra(s),className:`w-full px-3 py-2.5 text-sm font-bold rounded-xl transition-all press-feedback ${de===t?"bg-gradient-to-r from-purple-400 to-pink-400 text-white shadow-lg scale-105":a?"bg-[#252233] text-gray-300 hover:bg-[#2D2A3E] border-2 border-[#3D3A4E]":"bg-gray-100 text-gray-600 hover:bg-gray-200 border-2 border-gray-200"}`},t),ps!==s&&e.createElement("div",{onClick:()=>ra(s),className:`absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity ${a?"bg-purple-600 text-white":"bg-purple-400 text-white"}`,title:"Click to edit"},e.createElement(Oa,{className:"w-2.5 h-2.5"}))))),gt==="quick"&&de&&e.createElement("div",{className:`mt-2 text-xs ${a?"text-gray-500":"text-gray-400"}`},"Selected: ",e.createElement("span",{className:`font-bold ${a?"text-purple-400":"text-purple-500"}`},de),e.createElement("span",{className:"ml-2 opacity-60"},"(double-tap to edit buttons)"))),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},oe==="buy"?"Cost ($)":"Proceeds ($)"),e.createElement("input",{id:"invest-amount",type:"text",inputMode:"decimal",placeholder:"500",value:mt?wa(mt):"",onChange:t=>Vt(Ca(t.target.value)),onKeyDown:t=>(t.key==="Enter"||t.keyCode===13)&&Ia(),className:`candy-input ${a?"candy-input-dark":"candy-input-light"} ${Q==="invest-amount"?"shake border-red-400":""}`})),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Quantity ",e.createElement("span",{className:`font-normal text-xs ${a?"text-gray-600":"text-gray-400"}`},"(optional)")),e.createElement("input",{id:"invest-quantity",type:"text",inputMode:"decimal",placeholder:"e.g., 2.5",value:we?wa(we):"",onChange:t=>Zt(Ca(t.target.value)),onKeyDown:t=>(t.key==="Enter"||t.keyCode===13)&&Ia(),className:`candy-input ${a?"candy-input-dark":"candy-input-light"} ${Q==="invest-quantity"?"shake border-red-400":""}`})),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Month/Year"),e.createElement(tt,{month:ns,year:is,setMonth:ls,setYear:ds,darkMode:a,variant:"purple"}))),e.createElement("div",{className:"mt-4 flex justify-end gap-2"},(de||mt||we)&&e.createElement(v,{variant:"ghost",size:"sm",onClick:hn,className:"press-feedback"},e.createElement(F,{className:"w-4 h-4"})," Clear"),e.createElement(v,{variant:oe==="buy"?"success":"primary",onClick:Ia,className:`btn-press ${T==="add-investment"?"success-flash":""}`},T==="add-investment"?e.createElement(le,{className:"w-5 h-5"}):e.createElement(fe,{className:"w-5 h-5"}),T==="add-investment"?"Added!":oe==="buy"?"Add Buy":"Add Sell"))),e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4"},e.createElement(O,{darkMode:a,icon:e.createElement(Ot,{className:"w-6 h-6"}),label:"Total Bought",value:d(Pn()),color:"purple",pop:ha==="invest-total"}),e.createElement(O,{darkMode:a,icon:e.createElement(Ot,{className:"w-6 h-6 rotate-180"}),label:"Total Sold",value:d(On()),color:"pink"}),e.createElement(O,{darkMode:a,icon:e.createElement(Pa,{className:"w-6 h-6"}),label:"Net Invested",value:d(Bn()),color:"blue"}),e.createElement(O,{darkMode:a,icon:e.createElement(pl,{className:"w-6 h-6"}),label:e.createElement("span",{className:"flex items-center gap-1"},_e().total>=0?"Total P&L":"Total Loss",_e().hasMixedEntries&&e.createElement("span",{className:`text-[10px] ${a?"text-amber-400":"text-amber-500"}`,title:"Some entries missing quantities"},"*")),value:(_e().total>=0?"+":"")+d(_e().total),color:_e().total>=0?"green":"orange"})),_e().hasMixedEntries&&e.createElement("div",{className:`text-xs text-center ${a?"text-amber-400/70":"text-amber-600/70"}`},"* P&L calculated only from entries with quantities. Expand holdings for details."),Ae.length>0&&e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},e.createElement(k,{darkMode:a},e.createElement("h3",{className:`text-lg font-bold mb-4 ${a?"text-gray-100":"text-gray-700"}`},"Portfolio Breakdown"),e.createElement("div",{className:"flex flex-col md:flex-row gap-6"},e.createElement("div",{className:"flex-1"},e.createElement(ve,{width:"100%",height:200},e.createElement(wo,null,e.createElement(Co,{data:Xs(),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:70,innerRadius:45,paddingAngle:5},Xs().map((t,s)=>e.createElement($o,{key:`cell-${s}`,fill:Qe[s%Qe.length]}))),e.createElement(ke,{formatter:t=>d(t)}),e.createElement(jt,null)))),e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("span",{className:`text-sm font-bold ${a?"text-gray-400":"text-gray-500"}`},"Monthly Activity"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{onClick:()=>ms(t=>t-1),className:`w-7 h-7 rounded-lg flex items-center justify-center transition-colors ${a?"hover:bg-white/10 text-gray-400":"hover:bg-gray-100 text-gray-500"}`},e.createElement(ll,{className:"w-4 h-4"})),e.createElement("span",{className:`text-sm font-bold min-w-[50px] text-center ${a?"text-gray-200":"text-gray-700"}`},ta),e.createElement("button",{onClick:()=>ms(t=>t+1),className:`w-7 h-7 rounded-lg flex items-center justify-center transition-colors ${a?"hover:bg-white/10 text-gray-400":"hover:bg-gray-100 text-gray-500"}`},e.createElement(Ze,{className:"w-4 h-4"})))),e.createElement("div",{className:"grid grid-cols-4 gap-2"},["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((t,s)=>{let r=jn(ta)[s],o=r.buys>0,n=r.sells>0,i=o||n,c=r.buys-r.sells,m=s===new Date().getMonth()&&ta===new Date().getFullYear(),x=r.buys>=r.sells;return e.createElement("div",{key:t,className:`group relative p-2 rounded-xl text-center transition-all cursor-default ${i?a?"bg-purple-900/30 border-2 border-purple-500/30 hover:border-purple-400/50":"bg-purple-50 border-2 border-purple-200 hover:border-purple-300":a?"bg-[#1E1B2E] border-2 border-transparent":"bg-gray-50 border-2 border-transparent"} ${m?"ring-2 ring-pink-400":""}`},e.createElement("div",{className:`text-xs font-bold mb-1 ${a?"text-gray-400":"text-gray-500"}`},t),i?e.createElement("div",{className:`text-xs font-bold ${c>=0?"text-emerald-500":"text-rose-500"}`},c>=0?"+":"",d(c).replace("$","")):e.createElement("div",{className:`text-xs ${a?"text-gray-600":"text-gray-300"}`},"\u2014"),i&&e.createElement("div",{className:"absolute top-1 right-1"},e.createElement("span",{className:`w-2 h-2 rounded-full block ${x?"bg-emerald-400":"bg-rose-400"}`})),i&&e.createElement("div",{className:`absolute z-20 bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 rounded-xl text-xs font-medium whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none ${a?"bg-[#1E1B2E] border border-purple-500/30 shadow-xl":"bg-white border border-purple-200 shadow-lg"}`},e.createElement("div",{className:`font-bold mb-1 ${a?"text-gray-200":"text-gray-700"}`},t," ",ta),o&&e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:"w-2 h-2 rounded-full bg-emerald-400"}),e.createElement("span",{className:a?"text-gray-400":"text-gray-500"},"Bought:"),e.createElement("span",{className:"text-emerald-500 font-bold"},d(r.buys))),n&&e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:"w-2 h-2 rounded-full bg-rose-400"}),e.createElement("span",{className:a?"text-gray-400":"text-gray-500"},"Sold:"),e.createElement("span",{className:"text-rose-500 font-bold"},d(r.sells))),e.createElement("div",{className:`absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent ${a?"border-t-[#1E1B2E]":"border-t-white"}`})))})),e.createElement("div",{className:"flex justify-center gap-4 mt-3"},e.createElement("div",{className:"flex items-center gap-1.5"},e.createElement("span",{className:"w-2 h-2 rounded-full bg-emerald-400"}),e.createElement("span",{className:`text-xs ${a?"text-gray-500":"text-gray-400"}`},"Mostly Buys")),e.createElement("div",{className:"flex items-center gap-1.5"},e.createElement("span",{className:"w-2 h-2 rounded-full bg-rose-400"}),e.createElement("span",{className:`text-xs ${a?"text-gray-500":"text-gray-400"}`},"Mostly Sells")))))),e.createElement(k,{darkMode:a},e.createElement("h3",{className:`text-lg font-bold mb-4 ${a?"text-gray-100":"text-gray-700"}`},"Holdings"),e.createElement("div",{className:"space-y-3 max-h-[400px] overflow-y-auto"},Ae.map((t,s)=>{let r=Bt(t),o=cs[t],n=r.unrealizedPnL>=0?"text-emerald-500":"text-rose-500";return e.createElement("div",{key:t,className:`border-2 rounded-xl overflow-hidden transition-colors ${a?"border-[#3D3A4E]":"border-gray-100"}`},e.createElement("div",{className:`flex items-center justify-between p-3 cursor-pointer transition-colors press-feedback ${a?"hover:bg-white/5":"hover:bg-gray-50"}`,onClick:()=>Ao({...cs,[t]:!o})},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:`w-6 h-6 rounded-lg flex items-center justify-center transition-transform duration-300 ${o?"rotate-90":""} ${a?"bg-purple-900/30":"bg-purple-100"}`},e.createElement(Ze,{className:`w-4 h-4 ${a?"text-purple-400":"text-purple-500"}`})),e.createElement("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:Qe[s%Qe.length]}}),e.createElement("div",null,e.createElement("span",{className:`font-bold ${a?"text-gray-100":"text-gray-700"}`},t),r.totalQuantity>0&&e.createElement("span",{className:`ml-2 text-xs ${a?"text-gray-500":"text-gray-400"}`},r.totalQuantity.toLocaleString(void 0,{maximumFractionDigits:6})," units"))),e.createElement("div",{className:"text-right"},e.createElement("div",{className:"font-bold text-purple-500"},d(r.totalCost)),r.hasTrackedHoldings&&r.currentPrice>0&&e.createElement("div",{className:`text-xs font-medium ${n}`},r.unrealizedPnL>=0?"+":"",d(r.unrealizedPnL),r.hasMixedEntries&&e.createElement("span",{className:"opacity-60"},"*")))),e.createElement("div",{className:`accordion-content ${o?"expanded":""}`},e.createElement("div",null,e.createElement("div",{className:`border-t p-3 space-y-3 ${a?"border-[#3D3A4E] bg-[#1E1B2E]/50":"border-gray-100 bg-gray-50/50"}`},e.createElement("div",{className:"flex items-center gap-2 flex-wrap"},e.createElement("label",{className:`text-xs font-medium ${a?"text-gray-400":"text-gray-500"}`},"Current Price/Unit:"),e.createElement("div",{className:"relative flex-1 max-w-[120px]"},e.createElement("span",{className:`absolute left-3 top-1/2 -translate-y-1/2 text-sm ${a?"text-gray-500":"text-gray-400"}`},"$"),e.createElement("input",{type:"number",step:"any",placeholder:"0.00",value:Ce[t]||"",onChange:i=>ea({...Ce,[t]:parseFloat(i.target.value)||0}),className:`w-full pl-7 pr-2 py-1.5 text-sm rounded-lg outline-none ${a?"bg-[#252233] text-gray-100 placeholder-gray-600":"bg-white text-gray-700 placeholder-gray-400 border border-gray-200"}`}))),r.totalQuantity>0&&e.createElement("div",{className:`grid grid-cols-2 gap-2 text-xs ${a?"text-gray-400":"text-gray-500"}`},e.createElement("div",null,"Avg Cost: ",e.createElement("span",{className:a?"text-gray-200":"text-gray-700"},d(r.avgPrice),"/unit")),r.currentPrice>0&&e.createElement("div",null,"Current Value: ",e.createElement("span",{className:a?"text-gray-200":"text-gray-700"},d(r.currentValue))),r.realizedPnL!==0&&e.createElement("div",null,"Realized P&L: ",e.createElement("span",{className:r.realizedPnL>=0?"text-emerald-500":"text-rose-500"},r.realizedPnL>=0?"+":"",d(r.realizedPnL)))),r.hasMixedEntries&&e.createElement("div",{className:`p-2 rounded-lg text-xs ${a?"bg-amber-900/20 text-amber-400":"bg-amber-50 text-amber-600"}`},e.createElement("div",{className:"flex items-start gap-2"},e.createElement("span",null,"\u26A0\uFE0F"),e.createElement("div",null,e.createElement("div",{className:"font-medium"},"Mixed entries detected"),e.createElement("div",{className:"mt-0.5 opacity-80"},"P&L is calculated only from entries with quantities.",r.untrackedCost>0&&e.createElement("span",{className:"block mt-1"},"Tracked: ",d(r.trackedCost)," (",r.totalQuantity.toLocaleString(void 0,{maximumFractionDigits:4})," units)",e.createElement("br",null),"Untracked: ",d(r.untrackedCost)," (no qty)"))))),!r.hasTrackedHoldings&&r.untrackedCost>0&&e.createElement("div",{className:`p-2 rounded-lg text-xs ${a?"bg-blue-900/20 text-blue-400":"bg-blue-50 text-blue-600"}`},e.createElement("div",{className:"flex items-start gap-2"},e.createElement("span",null,"\u2139\uFE0F"),e.createElement("div",null,e.createElement("div",{className:"font-medium"},"No quantity data"),e.createElement("div",{className:"mt-0.5 opacity-80"},"Add quantities to your buys to enable P&L tracking.")))),(()=>{let i=Ln(t),c=8,m=rr[t]||0,x=Math.ceil(i.length/c),P=m*c,b=i.slice(P,P+c);return e.createElement(e.Fragment,null,e.createElement("div",{className:"flex items-center justify-between mb-1"},e.createElement("span",{className:`text-xs font-medium ${a?"text-gray-500":"text-gray-400"}`},"Recent Transactions"),x>1&&e.createElement("div",{className:"flex items-center gap-1"},e.createElement("button",{onClick:u=>{u.stopPropagation(),$s({...rr,[t]:Math.max(0,m-1)})},disabled:m===0,className:`px-2 py-0.5 text-xs font-bold rounded-lg transition-all ${m===0?"opacity-30 cursor-not-allowed":"hover:scale-105 active:scale-95"} ${a?"text-purple-400":"text-purple-500"}`},"\u2039 Prev"),e.createElement("span",{className:`text-xs ${a?"text-gray-500":"text-gray-400"}`},m+1,"/",x),e.createElement("button",{onClick:u=>{u.stopPropagation(),$s({...rr,[t]:Math.min(x-1,m+1)})},disabled:m>=x-1,className:`px-2 py-0.5 text-xs font-bold rounded-lg transition-all ${m>=x-1?"opacity-30 cursor-not-allowed":"hover:scale-105 active:scale-95"} ${a?"text-purple-400":"text-purple-500"}`},"Next \u203A"))),b.map(u=>e.createElement("div",{key:u.id,className:`flex items-center justify-between py-2 text-sm border-t ${De.has(u.id)?"delete-animation":""} ${a?"border-[#3D3A4E]/50":"border-gray-100"}`,onTouchStart:N=>be(N,"investment",u),onTouchEnd:_,onTouchMove:Sa,onMouseDown:N=>be(N,"investment",u),onMouseUp:_,onMouseLeave:_},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${u.type==="sell"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400"}`},u.type==="sell"?"SELL":"BUY"),e.createElement("span",{className:a?"text-gray-400":"text-gray-500"},Dr[u.month]," ",u.year)),e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"text-right"},e.createElement("span",{className:`font-medium ${a?"text-gray-200":"text-gray-700"}`},d(u.amount)),u.quantity&&e.createElement("span",{className:`ml-1 text-xs ${a?"text-gray-500":"text-gray-400"}`},"(",u.quantity," units)")),e.createElement("button",{onClick:N=>{N.stopPropagation(),_s(u.id)},className:`p-1 rounded-lg transition-colors ${a?"text-gray-500 hover:text-red-400 hover:bg-red-900/20":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`},e.createElement(F,{className:"w-4 h-4"}))))))})()))))})))),Ae.length===0&&e.createElement(k,{darkMode:a},e.createElement(R,{darkMode:a,icon:"\u{1F4C8}",title:"No investments yet",subtitle:"Start building your portfolio!"}))),y==="budget"&&e.createElement("div",{className:`space-y-6 tab-content ${G==="left"?"slide-left-exit":G==="right"?"slide-right-exit":"active"}`},e.createElement(k,{darkMode:a},e.createElement("h2",{className:`text-sm font-bold uppercase tracking-wider mb-6 ${a?"text-gray-400":"text-gray-500"}`},"Log Expense"),e.createElement("div",{className:"expense-grid"},e.createElement("div",{className:"space-y-3"},e.createElement("div",null,e.createElement("label",{className:`block text-xs font-bold uppercase tracking-wider mb-3 ${a?"text-gray-500":"text-gray-400"}`},"Amount"),e.createElement("div",{className:`relative rounded-2xl overflow-hidden ${a?"bg-[#1E1B2E]":"bg-gray-50"}`},e.createElement("span",{className:`absolute left-4 top-1/2 -translate-y-1/2 text-lg font-bold ${a?"text-gray-500":"text-gray-400"}`},"$"),e.createElement("input",{ref:Cr,id:"expense-amount",type:"text",inputMode:"decimal",placeholder:"0.00",value:ut?wa(ut):"",onChange:t=>sa(Ca(t.target.value)),onKeyDown:t=>(t.key==="Enter"||t.keyCode===13)&&Pr(),className:`w-full pl-10 pr-4 py-4 text-lg font-bold bg-transparent outline-none ${a?"text-gray-100 placeholder-gray-600":"text-gray-700 placeholder-gray-300"} ${Q==="expense-amount"?"shake":""}`}))),e.createElement("div",null,e.createElement("label",{className:`block text-xs font-bold uppercase tracking-wider mb-2 ${a?"text-gray-500":"text-gray-400"}`},"Notes ",e.createElement("span",{className:"font-normal opacity-60"},"(optional)")),e.createElement("input",{placeholder:"e.g., Lunch at cafe",value:Ga,onChange:t=>oa(t.target.value),onKeyDown:t=>(t.key==="Enter"||t.keyCode===13)&&Pr(),className:`w-full px-4 py-3 rounded-2xl text-sm font-medium bg-transparent outline-none transition-colors ${a?"bg-[#1E1B2E] text-gray-100 placeholder-gray-600":"bg-gray-50 text-gray-700 placeholder-gray-400"}`}))),e.createElement("div",null,e.createElement("label",{className:`block text-xs font-bold uppercase tracking-wider mb-3 ${a?"text-gray-500":"text-gray-400"}`},"Category"),e.createElement("div",{className:"grid grid-cols-3 gap-2"},xe.map(t=>{let s=us===t,r=J[t];return e.createElement("button",{key:t,onClick:()=>Ka(t),className:`px-3 py-3 rounded-xl font-bold text-sm transition-all press-feedback ${s?"text-white shadow-lg scale-105":a?"bg-[#1E1B2E] text-gray-400 hover:text-gray-200 hover:bg-[#2D2A3E]":"bg-gray-100 text-gray-500 hover:text-gray-700 hover:bg-gray-200"}`,style:s?{background:`linear-gradient(135deg, ${r.color}, ${r.color}dd)`,boxShadow:`0 4px 15px ${r.color}50`}:{}},e.createElement("span",{className:"flex items-center justify-center gap-2"},e.createElement("span",{className:"text-lg"},r.icon),e.createElement("span",{className:"uppercase tracking-wide"},t)))}))),e.createElement("div",{className:"space-y-3"},e.createElement("div",null,e.createElement("label",{className:`block text-xs font-bold uppercase tracking-wider mb-3 ${a?"text-gray-500":"text-gray-400"}`},"Date"),e.createElement("div",{className:`relative rounded-2xl overflow-hidden ${a?"bg-gradient-to-r from-purple-500/20 to-pink-500/20 border-2 border-purple-500/30":"bg-gradient-to-r from-violet-400/15 to-pink-400/15 border-2 border-violet-400/30"}`},e.createElement("input",{type:"date",value:xs,onChange:t=>Qa(t.target.value),className:`w-full px-4 py-4 text-center font-bold bg-transparent outline-none cursor-pointer ${a?"text-gray-100":"text-gray-700"}`}))),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{onClick:Pr,className:`flex-1 group flex items-center justify-center gap-2 px-4 py-4 rounded-2xl font-bold text-white transition-all hover:scale-105 active:scale-95 btn-press border-2 border-emerald-300/30 ${T==="add-expense"?"success-flash":""}`,style:{background:T==="add-expense"?"linear-gradient(135deg, #34D399, #10B981)":"linear-gradient(to right, #34D399, #2DD4BF, #22D3EE)",boxShadow:T==="add-expense"?"0 4px 20px rgba(52, 211, 153, 0.4)":"0 4px 20px rgba(52, 211, 153, 0.3)"}},T==="add-expense"?e.createElement(le,{className:"w-5 h-5"}):e.createElement(fe,{className:"w-5 h-5"}),e.createElement("span",{className:"uppercase tracking-wider text-sm"},T==="add-expense"?"Logged!":"Log")),(ut||Ga)&&e.createElement("button",{onClick:fn,className:`px-4 py-4 rounded-2xl font-bold text-sm transition-all press-feedback ${a?"bg-[#1E1B2E] text-gray-400 hover:text-gray-200":"bg-gray-100 text-gray-500 hover:text-gray-700"}`},e.createElement(F,{className:"w-5 h-5"})))))),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},e.createElement(O,{darkMode:a,icon:e.createElement(yo,{className:"w-6 h-6"}),label:"This Month",value:d(Rs()),color:"orange",pop:ha==="expense-total"}),e.createElement(O,{darkMode:a,icon:e.createElement(Jr,{className:"w-6 h-6"}),label:"Daily Average",value:d(Rs()/new Date(bt,xt+1,0).getDate()),color:"blue"})),e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4"},xe.map(t=>{let s=J[t],r=Zs(t);return e.createElement("div",{key:t,className:`card-lift p-4 rounded-2xl border-2 transition-all ${a?"border-opacity-30":""}`,style:{backgroundColor:a?`${s.color}15`:s.bg,borderColor:`${s.color}40`}},e.createElement("div",{className:"text-3xl mb-2"},s.icon),e.createElement("p",{className:`font-bold text-sm ${a?"text-gray-400":"text-gray-600"}`},t),e.createElement("p",{className:"text-xl font-black",style:{color:s.color}},d(r)))})),e.createElement(k,{darkMode:a},e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4"},e.createElement("h3",{className:`text-lg font-bold ${a?"text-gray-100":"text-gray-700"}`},"Spending Breakdown"),e.createElement(tt,{month:xt,year:bt,setMonth:Io,setYear:To,darkMode:a,variant:"purple"})),Or().length>0?e.createElement(ve,{width:"100%",height:250},e.createElement(wo,null,e.createElement(Co,{data:Or(),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,innerRadius:50,paddingAngle:5},Or().map(t=>e.createElement($o,{key:t.name,fill:J[t.name]?.color||"#999"}))),e.createElement(ke,{formatter:t=>d(t)}),e.createElement(jt,null))):e.createElement(R,{darkMode:a,icon:"\u{1F4CA}",title:"No expenses this month",subtitle:"Start tracking to see your breakdown!"})),e.createElement(k,{darkMode:a},(()=>{let t=Yn(),s=20,r=Math.ceil(t.length/s),o=me*s,n=t.slice(o,o+s);return e.createElement(e.Fragment,null,e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("h3",{className:`text-lg font-bold ${a?"text-gray-100":"text-gray-700"}`},"Recent Expenses"),r>1&&e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{onClick:()=>Es(Math.max(0,me-1)),disabled:me===0,className:`px-3 py-1 text-sm font-bold rounded-xl transition-all ${me===0?"opacity-30 cursor-not-allowed":"hover:scale-105 active:scale-95"} ${a?"text-purple-400":"text-purple-500"}`},"\u2039 Prev"),e.createElement("span",{className:`text-sm ${a?"text-gray-500":"text-gray-400"}`},me+1,"/",r),e.createElement("button",{onClick:()=>Es(Math.min(r-1,me+1)),disabled:me>=r-1,className:`px-3 py-1 text-sm font-bold rounded-xl transition-all ${me>=r-1?"opacity-30 cursor-not-allowed":"hover:scale-105 active:scale-95"} ${a?"text-purple-400":"text-purple-500"}`},"Next \u203A"))),n.length>0?e.createElement("div",{className:"space-y-2 max-h-[500px] overflow-y-auto"},n.map(i=>{let c=J[i.category];return e.createElement("div",{key:i.id,className:`flex items-center justify-between p-3 rounded-xl border-2 transition-all hover:shadow-md ${De.has(i.id)?"delete-animation":""} ${ya===i.id?"fade-in-up":""}`,style:{backgroundColor:a?`${c.color}15`:c.bg,borderColor:`${c.color}30`},onTouchStart:m=>be(m,"expense",i),onTouchEnd:_,onTouchMove:Sa,onMouseDown:m=>be(m,"expense",i),onMouseUp:_,onMouseLeave:_},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("span",{className:"text-2xl"},c.icon),e.createElement("div",null,e.createElement("p",{className:`font-bold ${a?"text-gray-100":"text-gray-700"}`},i.category),e.createElement("p",{className:`text-sm ${a?"text-gray-500":"text-gray-400"}`},ye(i.date)),i.notes&&e.createElement("p",{className:`text-xs mt-1 italic ${a?"text-gray-500":"text-gray-400"}`},'"',i.notes,'"'))),e.createElement("div",{className:"flex items-center gap-3"},e.createElement("span",{className:"font-black text-lg",style:{color:c.color}},d(i.amount)),e.createElement("button",{onClick:()=>Vs(i.id),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all touch-target press-feedback ${a?"bg-red-900/30 text-red-400 hover:bg-red-900/50 hover:text-red-300":"bg-white/80 text-red-400 hover:bg-red-100 hover:text-red-600"}`},e.createElement(F,{className:"w-5 h-5"}))))})):e.createElement(R,{darkMode:a,icon:"\u{1F4B8}",title:"No expenses yet",subtitle:"Add your first expense!"}))})()),e.createElement(k,{darkMode:a},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("h3",{className:`text-lg font-bold ${a?"text-gray-100":"text-gray-700"}`},"Recurring Expenses"),e.createElement("div",{className:"flex gap-2"},e.createElement(v,{variant:"ghost",size:"sm",onClick:()=>Va(!0)},e.createElement(fe,{className:"w-4 h-4"})," Add"),ae.length>0&&e.createElement(v,{variant:"success",size:"sm",onClick:qn},e.createElement(hl,{className:"w-4 h-4"})," Apply All"))),eo().length>0&&e.createElement("div",{className:`mb-4 p-4 rounded-2xl border-2 ${a?"bg-amber-900/20 border-amber-500/30":"bg-amber-50 border-amber-200"}`},e.createElement("h4",{className:`text-sm font-bold mb-3 flex items-center gap-2 ${a?"text-amber-400":"text-amber-600"}`},e.createElement(Jr,{className:"w-4 h-4"})," Due Soon"),e.createElement("div",{className:"space-y-2"},eo().map(t=>e.createElement("div",{key:t.id,className:`flex items-center justify-between p-2 rounded-xl ${a?"bg-[#1E1B2E]":"bg-white"}`},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:"text-lg"},J[t.category]?.icon),e.createElement("div",null,e.createElement("p",{className:`font-bold text-sm ${a?"text-gray-100":"text-gray-700"}`},t.name),e.createElement("p",{className:`text-xs ${t.isOverdue?"text-rose-500 font-bold":t.daysUntilDue<=3?"text-amber-500":a?"text-gray-500":"text-gray-400"}`},t.isOverdue?`\u26A0\uFE0F Overdue by ${Math.abs(t.daysUntilDue)} days`:t.daysUntilDue===0?"\u{1F4C5} Due today!":t.daysUntilDue===1?"\u{1F4C5} Due tomorrow":`\u{1F4C5} Due in ${t.daysUntilDue} days`))),e.createElement("span",{className:`font-bold ${a?"text-gray-100":"text-gray-700"}`},d(t.amount)))))),ae.length>0?e.createElement("div",{className:"space-y-2"},ae.map(t=>{let s=new Date().getDate(),r=t.dayOfMonth>=s?t.dayOfMonth-s:new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate()-s+t.dayOfMonth;return e.createElement("div",{key:t.id,className:`flex items-center justify-between p-3 rounded-xl ${a?"bg-[#1E1B2E]":"bg-gray-50"}`},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("span",{className:"text-xl"},J[t.category]?.icon),e.createElement("div",null,e.createElement("p",{className:`font-bold ${a?"text-gray-100":"text-gray-700"}`},t.name),e.createElement("p",{className:`text-sm ${a?"text-gray-500":"text-gray-400"}`},"Day ",t.dayOfMonth," \u2022 ",t.category))),e.createElement("div",{className:"flex items-center gap-3"},e.createElement("span",{className:`font-bold ${a?"text-gray-100":"text-gray-700"}`},d(t.amount)),e.createElement("button",{onClick:()=>Jn(t.id),className:"text-red-400 hover:text-red-600 press-feedback"},e.createElement(F,{className:"w-5 h-5"}))))})):e.createElement("p",{className:`text-center py-4 ${a?"text-gray-500":"text-gray-400"}`},"No recurring expenses set up"))),y==="clockin"&&e.createElement("div",{className:`space-y-6 tab-content ${G==="left"?"slide-left-exit":G==="right"?"slide-right-exit":"active"}`},e.createElement(k,{darkMode:a},e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4"},e.createElement("h2",{className:`text-xl font-black flex items-center gap-2 ${a?"text-gray-100":"text-gray-700"}`},e.createElement("span",{className:"text-2xl"},"\u23F0")," Log Work Hours"),e.createElement("div",{className:"flex items-center gap-2"},ao()&&e.createElement("button",{onClick:Wn,className:`px-3 py-2 rounded-xl text-xs font-bold transition-all press-feedback ${a?"bg-purple-900/30 text-purple-400 hover:bg-purple-900/50":"bg-purple-50 text-purple-600 hover:bg-purple-100"}`},"\u{1F4CB} Same as Yesterday"),e.createElement("div",{className:`flex rounded-xl overflow-hidden border-2 ${a?"border-[#3D3A4E]":"border-gray-200"}`},e.createElement("button",{onClick:()=>Ns("hours"),className:`px-3 py-2 text-xs font-bold transition-all ${Je==="hours"?"bg-gradient-to-r from-emerald-400 to-teal-400 text-white":a?"text-gray-400 hover:bg-white/5":"text-gray-500 hover:bg-gray-50"}`},"Hours"),e.createElement("button",{onClick:()=>Ns("clock"),className:`px-3 py-2 text-xs font-bold transition-all ${Je==="clock"?"bg-gradient-to-r from-emerald-400 to-teal-400 text-white":a?"text-gray-400 hover:bg-white/5":"text-gray-500 hover:bg-gray-50"}`},"Clock In/Out")))),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4"},Je==="hours"?e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Hours"),e.createElement("input",{ref:$r,id:"work-hours",type:"number",placeholder:"8",value:na,onChange:t=>ht(t.target.value),onKeyDown:t=>(t.key==="Enter"||t.keyCode===13)&&ro(),className:`candy-input ${a?"candy-input-dark":"candy-input-light"} ${Q==="work-hours"?"shake border-red-400":""}`})):e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Clock In"),e.createElement(Kr,{darkMode:a,value:$e,onChange:t=>tr(t.target.value),className:Q==="clock-in"?"shake":""})),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Clock Out"),e.createElement(Kr,{darkMode:a,value:Ee,onChange:t=>ar(t.target.value),className:Q==="clock-out"?"shake":""}),$e&&Ee&&e.createElement("p",{className:`text-xs mt-1 font-medium ${a?"text-emerald-400":"text-emerald-600"}`},"= ",to($e,Ee),"h"))),e.createElement("div",null,e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("div",{className:`flex rounded-xl overflow-hidden border-2 ${a?"border-[#3D3A4E]":"border-gray-200"}`},e.createElement("button",{onClick:()=>ws("manual"),className:`px-3 py-1 text-xs font-bold transition-all ${Nt==="manual"?"bg-gradient-to-r from-purple-400 to-pink-400 text-white":a?"text-gray-400 hover:bg-white/5":"text-gray-500 hover:bg-gray-50"}`},"Job/Client"),e.createElement("button",{onClick:()=>ws("quick"),className:`px-3 py-1 text-xs font-bold transition-all ${Nt==="quick"?"bg-gradient-to-r from-purple-400 to-pink-400 text-white":a?"text-gray-400 hover:bg-white/5":"text-gray-500 hover:bg-gray-50"}`},"Quick Jobs"))),Nt==="manual"&&e.createElement(e.Fragment,null,e.createElement("input",{id:"work-job",placeholder:"e.g., Freelance",value:re,onChange:t=>je(t.target.value),list:"job-names",className:`candy-input ${a?"candy-input-dark":"candy-input-light"} ${Q==="work-job"?"shake border-red-400":""}`}),e.createElement("datalist",{id:"job-names"},Ta().map(t=>e.createElement("option",{key:t,value:t})))),Nt==="quick"&&e.createElement("div",{className:"flex gap-2"},wt.map((t,s)=>e.createElement("div",{key:s,className:"flex-1 relative group"},Cs===s?e.createElement("input",{autoFocus:!0,type:"text",value:t,onChange:r=>{let o=[...wt];o[s]=r.target.value,ca(o)},onBlur:()=>ma(null),onKeyDown:r=>{r.key==="Enter"&&ma(null)},className:`w-full px-2 py-2.5 text-xs font-bold rounded-xl outline-none text-center ${a?"bg-[#252233] text-gray-100 border-2 border-purple-500":"bg-white text-gray-700 border-2 border-purple-400"}`}):e.createElement("button",{onClick:()=>je(t),onTouchEnd:r=>{r.preventDefault(),je(t)},onDoubleClick:()=>ma(s),className:`w-full px-2 py-2.5 text-xs font-bold rounded-xl transition-all press-feedback ${re===t?"bg-gradient-to-r from-purple-400 to-pink-400 text-white shadow-lg scale-105":a?"bg-[#252233] text-gray-300 hover:bg-[#2D2A3E] border-2 border-[#3D3A4E]":"bg-gray-100 text-gray-600 hover:bg-gray-200 border-2 border-gray-200"}`},t),Cs!==s&&e.createElement("div",{onClick:()=>ma(s),className:`absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity ${a?"bg-purple-600 text-white":"bg-purple-400 text-white"}`},e.createElement(Oa,{className:"w-2.5 h-2.5"}))))),Nt==="quick"&&re&&e.createElement("div",{className:`mt-2 text-xs ${a?"text-gray-500":"text-gray-400"}`},"Selected: ",e.createElement("span",{className:`font-bold ${a?"text-purple-400":"text-purple-500"}`},re))),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Description"),e.createElement("input",{id:"work-desc",placeholder:"What did you do?",value:la,onChange:t=>ft(t.target.value),className:`candy-input ${a?"candy-input-dark":"candy-input-light"} ${Q==="work-desc"?"shake border-red-400":""}`})),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Hourly Rate ($)"),e.createElement("input",{type:"number",placeholder:ze[re]||"20",value:Ye,onChange:t=>ia(t.target.value),className:`candy-input ${a?"candy-input-dark":"candy-input-light"}`})),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Date"),e.createElement(Hr,{darkMode:a,value:vs,onChange:t=>er(t.target.value)}))),e.createElement("div",{className:"mt-4 flex justify-end gap-2"},(na||re||la||$e||Ee)&&e.createElement(v,{variant:"ghost",size:"sm",onClick:vn,className:"press-feedback"},e.createElement(F,{className:"w-4 h-4"})," Clear"),e.createElement(v,{variant:"success",onClick:ro,className:`btn-press ${T==="add-work"?"success-flash":""}`},T==="add-work"?e.createElement(le,{className:"w-5 h-5"}):e.createElement(fe,{className:"w-5 h-5"}),T==="add-work"?"Logged!":"Log Hours"))),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},e.createElement(O,{darkMode:a,icon:e.createElement(fo,{className:"w-6 h-6"}),label:"Hours This Month",value:`${Hn()}h`,color:"blue",pop:ha==="work-total"}),e.createElement(O,{darkMode:a,icon:e.createElement(Pa,{className:"w-6 h-6"}),label:"Earnings",value:d(Kn()),color:"green"}),e.createElement(O,{darkMode:a,icon:e.createElement(ko,{className:"w-6 h-6"}),label:"Jobs",value:Ta().length,color:"purple"})),e.createElement(k,{darkMode:a},e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4"},e.createElement("h3",{className:`text-lg font-bold ${a?"text-gray-100":"text-gray-700"}`},"Work History"),e.createElement(tt,{month:vt,year:kt,setMonth:Lo,setYear:jo,darkMode:a,variant:"purple"})),Ta().length===0?e.createElement(R,{darkMode:a,icon:"\u23F0",title:"No work logged yet",subtitle:"Start tracking your hours!"}):e.createElement("div",{className:"space-y-3"},Ta().map(t=>{let s=Un(t),r=Qn(t),o=ks[t],n=r.reduce((i,c)=>i+c.hours*(c.hourlyRate||0),0);return r.length===0?null:e.createElement("div",{key:t,className:`border-2 rounded-2xl overflow-hidden ${a?"border-[#3D3A4E] bg-[#252233]":"border-gray-100 bg-white"}`},e.createElement("div",{className:`flex items-center justify-between p-4 cursor-pointer transition-colors press-feedback ${a?"hover:bg-white/5":"hover:bg-gray-50"}`,onClick:()=>Oo({...ks,[t]:!o})},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center transition-transform duration-300 ${o?"rotate-90":""} ${o?a?"bg-blue-900/30":"bg-blue-100":a?"bg-[#2D2A3E]":"bg-gray-100"}`},e.createElement(Ze,{className:`w-5 h-5 ${o?"text-blue-500":a?"text-gray-500":"text-gray-400"}`})),e.createElement("div",null,e.createElement("p",{className:`font-bold ${a?"text-gray-100":"text-gray-700"}`},t),e.createElement("p",{className:`text-sm ${a?"text-gray-500":"text-gray-400"}`},r.length," logs \u2022 ",s,"h total"))),e.createElement("span",{className:"text-xl font-black text-emerald-500"},d(n))),e.createElement("div",{className:`accordion-content ${o?"expanded":""}`},e.createElement("div",null,e.createElement("div",{className:`border-t ${a?"border-[#3D3A4E] bg-[#1E1B2E]/50":"border-gray-100 bg-gray-50/50"}`},(()=>{let c=sr[t]||0,m=Math.ceil(r.length/8),x=c*8,P=r.slice(x,x+8);return e.createElement(e.Fragment,null,m>1&&e.createElement("div",{className:`flex items-center justify-between px-4 py-2 ${a?"bg-[#252233]":"bg-gray-100"}`},e.createElement("span",{className:`text-xs font-medium ${a?"text-gray-500":"text-gray-400"}`},"Showing ",x+1,"-",Math.min(x+8,r.length)," of ",r.length),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{onClick:b=>{b.stopPropagation(),Ss({...sr,[t]:Math.max(0,c-1)})},disabled:c===0,className:`px-2 py-1 text-xs font-bold rounded-lg transition-all ${c===0?"opacity-30 cursor-not-allowed":"hover:scale-105 active:scale-95"} ${a?"text-purple-400":"text-purple-500"}`},"\u2039 Prev"),e.createElement("span",{className:`text-xs ${a?"text-gray-500":"text-gray-400"}`},c+1,"/",m),e.createElement("button",{onClick:b=>{b.stopPropagation(),Ss({...sr,[t]:Math.min(m-1,c+1)})},disabled:c>=m-1,className:`px-2 py-1 text-xs font-bold rounded-lg transition-all ${c>=m-1?"opacity-30 cursor-not-allowed":"hover:scale-105 active:scale-95"} ${a?"text-purple-400":"text-purple-500"}`},"Next \u203A"))),P.map(b=>e.createElement("div",{key:b.id,className:`flex items-center justify-between px-4 py-3 border-b last:border-0 ${De.has(b.id)?"delete-animation":""} ${a?"border-[#3D3A4E]":"border-gray-100"}`,onTouchStart:u=>be(u,"worklog",b),onTouchEnd:_,onTouchMove:Sa,onMouseDown:u=>be(u,"worklog",b),onMouseUp:_,onMouseLeave:_},e.createElement("div",null,e.createElement("p",{className:`text-sm font-medium ${a?"text-gray-200":"text-gray-700"}`},b.description),e.createElement("p",{className:`text-xs ${a?"text-gray-500":"text-gray-400"}`},ye(b.date)," \u2022 ",b.hours,"h @ $",b.hourlyRate,"/hr")),e.createElement("div",{className:"flex items-center gap-3"},e.createElement("span",{className:`font-bold ${a?"text-gray-100":"text-gray-700"}`},d(b.hours*(b.hourlyRate||0))),e.createElement("button",{onClick:()=>so(b.id),className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors touch-target press-feedback ${a?"bg-red-900/30 text-red-400 hover:bg-red-900/50":"bg-red-100 text-red-500 hover:bg-red-200"}`},e.createElement(F,{className:"w-5 h-5"}))))))})()))))})))),y==="todos"&&e.createElement("div",{className:`space-y-6 tab-content ${G==="left"?"slide-left-exit":G==="right"?"slide-right-exit":"active"}`},e.createElement(k,{darkMode:a},e.createElement("h2",{className:`text-xl font-black mb-4 flex items-center gap-2 ${a?"text-gray-100":"text-gray-700"}`},e.createElement("span",{className:"text-2xl"},"\u2728")," Add Task"),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4"},e.createElement("div",{className:"sm:col-span-2"},e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"What needs doing?"),e.createElement("input",{ref:Er,id:"todo-text",placeholder:"e.g., Finish project proposal",value:ga,onChange:t=>or(t.target.value),onKeyDown:t=>(t.key==="Enter"||t.keyCode===13)&&oo(),className:`candy-input ${a?"candy-input-dark":"candy-input-light"} ${Q==="todo-text"?"shake border-red-400":""}`})),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Date"),e.createElement(Hr,{darkMode:a,value:Ds,onChange:t=>Ms(t.target.value)})),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Time (optional)"),e.createElement(Kr,{darkMode:a,value:nr,onChange:t=>lr(t.target.value)}))),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4"},e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Priority"),e.createElement("div",{className:`flex rounded-xl overflow-hidden border-2 ${a?"border-[#3D3A4E]":"border-gray-200"}`},["low","medium","high"].map(t=>e.createElement("button",{key:t,onClick:()=>dr(t),className:`flex-1 px-3 py-2 text-xs font-bold transition-all capitalize ${ir===t?t==="high"?"bg-rose-500/20 text-rose-500":t==="medium"?"bg-amber-500/20 text-amber-500":"bg-emerald-500/20 text-emerald-500":a?"text-gray-500 hover:bg-white/5":"text-gray-400 hover:bg-gray-50"}`},t)))),e.createElement("div",{className:"sm:col-span-2"},e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Link Expense (auto-log when completed)"),e.createElement("div",{className:"flex gap-2"},e.createElement("select",{value:ge?.category||"",onChange:t=>pa(t.target.value?{...ge,category:t.target.value,amount:ge?.amount||0}:null),className:`flex-1 px-3 py-2 rounded-xl outline-none text-sm ${a?"bg-[#1E1B2E] text-gray-100 border-2 border-[#3D3A4E]":"bg-gray-50 text-gray-700 border-2 border-gray-200"}`},e.createElement("option",{value:""},"No linked expense"),Object.keys(J).map(t=>e.createElement("option",{key:t,value:t},J[t].icon," ",t))),ge&&e.createElement("input",{type:"number",placeholder:"$0",value:ge?.amount||"",onChange:t=>pa({...ge,amount:parseFloat(t.target.value)||0}),className:`w-24 px-3 py-2 rounded-xl outline-none text-sm ${a?"bg-[#1E1B2E] text-gray-100 border-2 border-[#3D3A4E]":"bg-gray-50 text-gray-700 border-2 border-gray-200"}`})))),e.createElement("div",{className:"mt-4 flex justify-end gap-2"},(ga||nr||ir!=="medium"||ge)&&e.createElement(v,{variant:"ghost",size:"sm",onClick:kn,className:"press-feedback"},e.createElement(F,{className:"w-4 h-4"})," Clear"),e.createElement(v,{onClick:oo,className:`btn-press ${T==="add-todo"?"success-flash":""}`},T==="add-todo"?e.createElement(le,{className:"w-5 h-5"}):e.createElement(fe,{className:"w-5 h-5"}),T==="add-todo"?"Added!":"Add Task"))),e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4"},e.createElement(O,{darkMode:a,icon:e.createElement(No,{className:"w-6 h-6"}),label:"Total",value:Fa().total,color:"blue"}),e.createElement(O,{darkMode:a,icon:e.createElement(le,{className:"w-6 h-6"}),label:"Done",value:Fa().completed,color:"green"}),e.createElement(O,{darkMode:a,icon:e.createElement(fo,{className:"w-6 h-6"}),label:"Pending",value:Fa().pending,color:"orange"}),e.createElement(O,{darkMode:a,icon:e.createElement(ul,{className:"w-6 h-6"}),label:"Overdue",value:Fa().overdue,color:"pink"})),e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement(v,{variant:"ghost",size:"sm",onClick:()=>qo(!ua)},e.createElement(vo,{className:"w-4 h-4"}),ua?"Exit Archive Mode":"Archive Mode"),ua&&e.createElement(v,{variant:"success",size:"sm",onClick:Rn},e.createElement(le,{className:"w-4 h-4"})," Archive Completed"),e.createElement(v,{variant:"ghost",size:"sm",onClick:()=>zo(!gr)},e.createElement(Jr,{className:"w-4 h-4"}),gr?"Hide":"View"," Archives")),e.createElement(k,{darkMode:a},e.createElement("h3",{className:`text-lg font-bold mb-4 ${a?"text-gray-100":"text-gray-700"}`},"Your Tasks"),E.length===0?e.createElement(R,{darkMode:a,icon:"\u2705",title:"All clear!",subtitle:"Add a task to get started"}):e.createElement("div",{className:"space-y-3"},el().map(t=>{let s=!t.completed&&t.date<new Date().toISOString().split("T")[0];return e.createElement("div",{key:t.id,className:`p-4 rounded-2xl border-2 transition-all ${De.has(t.id)?"delete-animation":""} ${t.completed?a?"bg-emerald-900/20 border-emerald-700":"bg-emerald-50 border-emerald-200":s?a?"bg-red-900/20 border-red-700":"bg-red-50 border-red-200":a?"bg-[#252233] border-[#3D3A4E]":"bg-white border-gray-100"} ${ya===t.id?"fade-in-up":""}`},e.createElement("div",{className:"flex items-start gap-3"},e.createElement("div",{className:"checkbox-sparkles relative"},e.createElement("button",{onClick:r=>{let o=r.currentTarget.parentElement;t.completed||(o.classList.add("sparkle-active"),setTimeout(()=>o.classList.remove("sparkle-active"),500)),Gn(t.id)},className:`w-8 h-8 rounded-xl flex items-center justify-center transition-all flex-shrink-0 touch-target-sm press-feedback ${t.completed?"bg-emerald-500 text-white checkbox-burst":a?"border-2 border-gray-600 hover:border-emerald-400 hover:bg-emerald-900/20":"border-2 border-gray-300 hover:border-emerald-400 hover:bg-emerald-50"}`},t.completed&&e.createElement(le,{className:"w-5 h-5 check-pop"}))),e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"flex items-center gap-2"},t.priority&&t.priority!=="medium"&&e.createElement("span",{className:`w-2 h-2 rounded-full flex-shrink-0 ${t.priority==="high"?"bg-rose-400":"bg-emerald-400"}`,title:`${t.priority} priority`}),e.createElement("p",{className:`font-bold transition-all duration-300 ${t.completed?a?"text-gray-500 line-through":"text-gray-400 line-through":a?"text-gray-100":"text-gray-700"}`},t.text)),e.createElement("div",{className:`text-sm mt-1 flex flex-wrap items-center gap-x-2 ${a?"text-gray-500":"text-gray-400"}`},e.createElement("span",null,ye(t.date)),t.time&&e.createElement("span",null,"at ",t.time),s&&e.createElement("span",{className:"text-red-500 font-bold"},"\u2022 Overdue!"),t.linkedExpense&&!t.completed&&e.createElement("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${a?"bg-purple-900/30 text-purple-400":"bg-purple-100 text-purple-600"}`},J[t.linkedExpense.category]?.icon," ",d(t.linkedExpense.amount)),t.linkedExpense&&t.completed&&e.createElement("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${a?"bg-emerald-900/30 text-emerald-400":"bg-emerald-100 text-emerald-600"}`},"\u2713 Logged ",d(t.linkedExpense.amount))),t.subtasks.length>0&&e.createElement("div",{className:`mt-3 pl-4 border-l-2 space-y-2 ${a?"border-gray-600":"border-gray-200"}`},t.subtasks.map(r=>e.createElement("div",{key:r.id,className:"flex items-center gap-2"},e.createElement("div",{className:"checkbox-sparkles relative"},e.createElement("button",{onClick:o=>{let n=o.currentTarget.parentElement;r.completed||(n.classList.add("sparkle-active"),setTimeout(()=>n.classList.remove("sparkle-active"),500)),Xn(t.id,r.id)},className:`w-6 h-6 rounded-lg flex items-center justify-center transition-all press-feedback ${r.completed?"bg-emerald-400 text-white checkbox-burst":a?"border-2 border-gray-600 hover:border-emerald-400":"border-2 border-gray-300 hover:border-emerald-400"}`},r.completed&&e.createElement(le,{className:"w-3 h-3 check-pop"}))),e.createElement("span",{className:`text-sm transition-all duration-300 ${r.completed?a?"text-gray-500 line-through":"text-gray-400 line-through":a?"text-gray-300":"text-gray-600"}`},r.text),e.createElement("button",{onClick:()=>Vn(t.id,r.id),className:`ml-auto p-1 rounded transition-colors ${a?"text-gray-600 hover:text-red-400":"text-gray-300 hover:text-red-400"}`},e.createElement(F,{className:"w-4 h-4"}))))),Yo===t.id?e.createElement("div",{className:"mt-3 flex gap-2"},e.createElement("input",{placeholder:"Subtask...",value:mr,onChange:r=>As(r.target.value),onKeyDown:r=>(r.key==="Enter"||r.keyCode===13)&&no(t.id),className:`flex-1 text-sm py-2 px-3 rounded-xl outline-none ${a?"bg-[#1E1B2E] text-gray-100 placeholder-gray-500":"bg-gray-100 text-gray-700 placeholder-gray-400"}`}),e.createElement(v,{size:"sm",onClick:()=>no(t.id)},"Add"),e.createElement(v,{variant:"ghost",size:"sm",onClick:()=>cr(null)},"Cancel")):e.createElement("button",{onClick:()=>cr(t.id),className:"mt-2 text-sm text-gray-400 hover:text-pink-500 transition-colors"},"+ Add subtask")),e.createElement("div",{className:"flex gap-2"},ua&&e.createElement("button",{onClick:()=>Zn(t.id),className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors touch-target press-feedback ${a?"bg-purple-900/30 text-purple-400 hover:bg-purple-900/50":"bg-purple-100 text-purple-500 hover:bg-purple-200"}`},e.createElement(vo,{className:"w-5 h-5"})),e.createElement("button",{onClick:()=>_n(t.id),className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors touch-target press-feedback ${a?"bg-red-900/30 text-red-400 hover:bg-red-900/50":"bg-red-100 text-red-500 hover:bg-red-200"}`},e.createElement(F,{className:"w-5 h-5"})))))}))),gr&&K.length>0&&e.createElement(k,{darkMode:a},e.createElement("h3",{className:`text-lg font-bold mb-4 ${a?"text-gray-100":"text-gray-700"}`},"\u{1F4C1} Archived Tasks"),e.createElement("div",{className:"space-y-3 max-h-96 overflow-y-auto"},K.sort((t,s)=>s.date.localeCompare(t.date)).map(t=>e.createElement("div",{key:t.date,className:"border-2 border-gray-100 rounded-xl overflow-hidden"},e.createElement("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer",onClick:()=>Jo({...pr,[t.date]:!pr[t.date]})},e.createElement("span",{className:"font-bold text-gray-600"},ye(t.date)),e.createElement("span",{className:"text-sm text-gray-400"},t.todos.length," tasks")),pr[t.date]&&e.createElement("div",{className:"p-3 space-y-2"},t.todos.map(s=>e.createElement("div",{key:s.id,className:"flex items-center gap-2 text-sm"},e.createElement("span",{className:s.completed?"text-emerald-500":"text-gray-400"},s.completed?"\u2705":"\u2B1C"),e.createElement("span",{className:s.completed?"text-gray-600":"text-gray-400"},s.text))))))))),y==="trends"&&e.createElement("div",{className:`space-y-6 tab-content ${G==="left"?"slide-left-exit":G==="right"?"slide-right-exit":"active"}`,ref:St},e.createElement(k,{darkMode:a},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("h2",{className:`text-xl font-black flex items-center gap-2 ${a?"text-gray-100":"text-gray-700"}`},e.createElement("span",{className:"text-2xl"},"\u{1F4CA}")," Analytics Period"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{onClick:bn,disabled:xa,className:`p-3 rounded-xl transition-all hover:scale-105 active:scale-95 ${xa?"opacity-50 cursor-not-allowed":""} ${a?"bg-blue-900/30 text-blue-400 hover:bg-blue-900/50":"bg-blue-100 text-blue-600 hover:bg-blue-200"}`,title:"Screenshot Analytics"},xa?e.createElement("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.createElement(Nl,{className:"w-5 h-5"})),e.createElement("button",{onClick:()=>{let t=tl(),s=al(),r=`Month,Income,Expenses,Net,Hours Worked
`;t.forEach((o,n)=>{let i=s[n]?.hours||0;r+=`${o.name},${o.income},${o.expenses},${o.net},${i}
`}),r+=`
Total Income,${t.reduce((o,n)=>o+n.income,0)}
`,r+=`Total Expenses,${t.reduce((o,n)=>o+n.expenses,0)}
`,r+=`Net Total,${t.reduce((o,n)=>o+n.net,0)}
`,r+=`Total Hours,${s.reduce((o,n)=>o+n.hours,0)}
`,Xo(r),Ls(!0)},className:`p-3 rounded-xl transition-all hover:scale-105 active:scale-95 ${a?"bg-purple-900/30 text-purple-400 hover:bg-purple-900/50":"bg-purple-100 text-purple-600 hover:bg-purple-200"}`,title:"Export Analytics to CSV"},e.createElement(kl,{className:"w-5 h-5"})))),e.createElement("div",{className:"flex flex-wrap items-center gap-4"},e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"From"),e.createElement(tt,{month:Ct.month,year:Ct.year,setMonth:t=>Is({...Ct,month:t}),setYear:t=>Is({...Ct,year:t}),variant:"purple",darkMode:a})),e.createElement("span",{className:"text-gray-400 font-bold mt-6"},"\u2192"),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"To"),e.createElement(tt,{month:$t.month,year:$t.year,setMonth:t=>Ts({...$t,month:t}),setYear:t=>Ts({...$t,year:t}),variant:"purple",darkMode:a})))),e.createElement(k,{darkMode:a},e.createElement("h2",{className:`text-xl font-black mb-4 flex items-center gap-2 ${a?"text-gray-100":"text-gray-700"}`},e.createElement("span",{className:"text-2xl"},"\u{1F48E}")," Net Worth"),e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mb-6"},e.createElement("div",{className:`p-4 rounded-2xl text-center ${a?"bg-emerald-900/20 border-2 border-emerald-500/30":"bg-emerald-50 border-2 border-emerald-200"}`},e.createElement("p",{className:`text-xs font-medium mb-1 ${a?"text-gray-400":"text-gray-500"}`},"Checking"),e.createElement("p",{className:"text-xl font-bold text-emerald-500"},d(M().checking))),e.createElement("div",{className:`p-4 rounded-2xl text-center ${a?"bg-blue-900/20 border-2 border-blue-500/30":"bg-blue-50 border-2 border-blue-200"}`},e.createElement("p",{className:`text-xs font-medium mb-1 ${a?"text-gray-400":"text-gray-500"}`},"Investments"),e.createElement("p",{className:"text-xl font-bold text-blue-500"},d(M().investments))),e.createElement("div",{className:`p-4 rounded-2xl text-center ${a?"bg-purple-900/20 border-2 border-purple-500/30":"bg-purple-50 border-2 border-purple-200"}`},e.createElement("p",{className:`text-xs font-medium mb-1 ${a?"text-gray-400":"text-gray-500"}`},"Total Assets"),e.createElement("p",{className:"text-xl font-bold text-purple-500"},d(M().totalAssets))),e.createElement("div",{className:`p-4 rounded-2xl text-center ${a?"bg-rose-900/20 border-2 border-rose-500/30":"bg-rose-50 border-2 border-rose-200"}`},e.createElement("p",{className:`text-xs font-medium mb-1 ${a?"text-gray-400":"text-gray-500"}`},"Debt"),e.createElement("p",{className:"text-xl font-bold text-rose-500"},"-",d(M().debt))),e.createElement("div",{className:`p-4 rounded-2xl text-center col-span-2 md:col-span-1 ${M().netWorth>=0?a?"bg-gradient-to-br from-emerald-900/30 to-teal-900/30 border-2 border-emerald-500/50":"bg-gradient-to-br from-emerald-100 to-teal-100 border-2 border-emerald-300":a?"bg-gradient-to-br from-rose-900/30 to-pink-900/30 border-2 border-rose-500/50":"bg-gradient-to-br from-rose-100 to-pink-100 border-2 border-rose-300"}`},e.createElement("p",{className:`text-xs font-medium mb-1 ${a?"text-gray-400":"text-gray-500"}`},"Net Worth"),e.createElement("p",{className:`text-2xl font-black ${M().netWorth>=0?"text-emerald-500":"text-rose-500"}`},M().netWorth>=0?"":"-",d(Math.abs(M().netWorth))))),e.createElement("div",null,e.createElement("h3",{className:`text-sm font-bold mb-3 ${a?"text-gray-400":"text-gray-500"}`},"Monthly Net Worth Trend"),go().length>0?e.createElement(ve,{width:"100%",height:250},e.createElement(Wr,{data:go()},e.createElement("defs",null,e.createElement("linearGradient",{id:"netWorthGradient",x1:"0",y1:"0",x2:"0",y2:"1"},e.createElement("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.4}),e.createElement("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})),e.createElement("linearGradient",{id:"assetsGradient",x1:"0",y1:"0",x2:"0",y2:"1"},e.createElement("stop",{offset:"5%",stopColor:"#8B5CF6",stopOpacity:.3}),e.createElement("stop",{offset:"95%",stopColor:"#8B5CF6",stopOpacity:0}))),e.createElement(et,{strokeDasharray:"3 3",stroke:a?"#3D3A4E":"#E8E4EE"}),e.createElement(Re,{dataKey:"label",tick:{fill:a?"#9CA3AF":"#6B6789",fontSize:11}}),e.createElement(Be,{tick:{fill:a?"#9CA3AF":"#6B6789",fontSize:11},tickFormatter:t=>`$${(t/1e3).toFixed(0)}k`}),e.createElement(ke,{formatter:(t,s)=>[d(t),s==="netWorth"?"Net Worth":s==="investments"?"Investments":s==="checking"?"Checking":"Debt"],contentStyle:{backgroundColor:a?"#252233":"#fff",border:`2px solid ${a?"#3D3A4E":"#E8E4EE"}`,borderRadius:"12px"}}),e.createElement(Ur,{type:"monotone",dataKey:"netWorth",stroke:"#10B981",fill:"url(#netWorthGradient)",strokeWidth:3,name:"netWorth"}))):e.createElement("div",{className:`text-center py-8 rounded-2xl ${a?"bg-[#1E1B2E]":"bg-gray-50"}`},e.createElement("span",{className:"text-3xl mb-2 block"},"\u{1F4CA}"),e.createElement("p",{className:`text-sm ${a?"text-gray-500":"text-gray-400"}`},"Add investments or accounts to see your net worth trend"))),M().totalAssets>0&&e.createElement("div",{className:"mt-4"},e.createElement("h3",{className:`text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Asset Breakdown"),e.createElement("div",{className:"h-4 rounded-full overflow-hidden flex"},M().checking>0&&e.createElement("div",{className:"bg-emerald-500 h-full",style:{width:`${M().checking/M().totalAssets*100}%`},title:`Checking: ${d(M().checking)}`}),M().investments>0&&e.createElement("div",{className:"bg-blue-500 h-full",style:{width:`${M().investments/M().totalAssets*100}%`},title:`Investments: ${d(M().investments)}`})),e.createElement("div",{className:"flex gap-4 mt-2 text-xs"},e.createElement("span",{className:"flex items-center gap-1"},e.createElement("span",{className:"w-3 h-3 rounded bg-emerald-500"}),e.createElement("span",{className:a?"text-gray-400":"text-gray-500"},"Checking (",(M().checking/M().totalAssets*100).toFixed(0),"%)")),e.createElement("span",{className:"flex items-center gap-1"},e.createElement("span",{className:"w-3 h-3 rounded bg-blue-500"}),e.createElement("span",{className:a?"text-gray-400":"text-gray-500"},"Investments (",(M().investments/M().totalAssets*100).toFixed(0),"%)"))))),e.createElement(k,{darkMode:a,className:"overflow-hidden"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("h2",{className:`text-xl font-black flex items-center gap-2 ${a?"text-gray-100":"text-gray-700"}`},e.createElement("span",{className:"text-2xl"},"\u{1F9E0}")," Smart Insights"),e.createElement("span",{className:`text-xs font-medium px-3 py-1 rounded-full ${a?"bg-purple-900/30 text-purple-400":"bg-purple-100 text-purple-600"}`},"AI-Powered")),po().length>0?e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},po().map((t,s)=>e.createElement("div",{key:s,className:`p-4 rounded-2xl border-2 transition-all hover:scale-[1.02] ${t.type==="positive"?a?"bg-emerald-900/20 border-emerald-500/30":"bg-emerald-50 border-emerald-200":t.type==="warning"?a?"bg-amber-900/20 border-amber-500/30":"bg-amber-50 border-amber-200":a?"bg-[#1E1B2E] border-[#3D3A4E]":"bg-gray-50 border-gray-200"}`},e.createElement("div",{className:"flex items-start gap-3"},e.createElement("span",{className:"text-2xl"},t.icon),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("h4",{className:`font-bold text-sm ${t.type==="positive"?"text-emerald-600 dark:text-emerald-400":t.type==="warning"?"text-amber-600 dark:text-amber-400":a?"text-gray-200":"text-gray-700"}`},t.title),e.createElement("p",{className:`text-sm mt-1 ${a?"text-gray-300":"text-gray-600"}`},t.message),e.createElement("p",{className:`text-xs mt-2 font-medium ${t.type==="positive"?"text-emerald-500":t.type==="warning"?"text-amber-500":a?"text-gray-500":"text-gray-400"}`},t.detail)))))):e.createElement("div",{className:`text-center py-8 rounded-2xl ${a?"bg-[#1E1B2E]":"bg-gray-50"}`},e.createElement("span",{className:"text-4xl mb-3 block"},"\u{1F4CA}"),e.createElement("p",{className:`font-bold ${a?"text-gray-300":"text-gray-600"}`},"Not enough data yet"),e.createElement("p",{className:`text-sm mt-1 ${a?"text-gray-500":"text-gray-400"}`},"Keep tracking your income and expenses to unlock insights!")),(w.length>0||f.length>0)&&e.createElement("div",{className:`mt-4 pt-4 border-t-2 ${a?"border-[#3D3A4E]":"border-gray-100"}`},e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4"},(()=>{let t=new Date,s=t.getMonth(),r=t.getFullYear(),o=new Date(r,s+1,0).getDate(),n=t.getDate(),i=w.filter(u=>{let N=u.date.split("-");return parseInt(N[1])-1===s&&parseInt(N[0])===r}).reduce((u,N)=>u+N.amount,0),c=f.filter(u=>{let N=u.date.split("-");return parseInt(N[1])-1===s&&parseInt(N[0])===r}).reduce((u,N)=>u+N.amount,0),m=c-i,x=c>0?m/c*100:0,b=i/Math.max(n,1)*o;return e.createElement(e.Fragment,null,e.createElement("div",{className:`p-3 rounded-xl text-center ${a?"bg-emerald-900/20":"bg-emerald-50"}`},e.createElement("p",{className:`text-xs font-medium ${a?"text-gray-400":"text-gray-500"}`},"Income"),e.createElement("p",{className:"text-lg font-bold text-emerald-500"},d(c))),e.createElement("div",{className:`p-3 rounded-xl text-center ${a?"bg-rose-900/20":"bg-rose-50"}`},e.createElement("p",{className:`text-xs font-medium ${a?"text-gray-400":"text-gray-500"}`},"Expenses"),e.createElement("p",{className:"text-lg font-bold text-rose-500"},d(i))),e.createElement("div",{className:`p-3 rounded-xl text-center ${m>=0?a?"bg-purple-900/20":"bg-purple-50":a?"bg-amber-900/20":"bg-amber-50"}`},e.createElement("p",{className:`text-xs font-medium ${a?"text-gray-400":"text-gray-500"}`},"Net"),e.createElement("p",{className:`text-lg font-bold ${m>=0?"text-purple-500":"text-amber-500"}`},m>=0?"+":"",d(m))),e.createElement("div",{className:`p-3 rounded-xl text-center ${a?"bg-blue-900/20":"bg-blue-50"}`},e.createElement("p",{className:`text-xs font-medium ${a?"text-gray-400":"text-gray-500"}`},"Projected"),e.createElement("p",{className:"text-lg font-bold text-blue-500"},d(b))))})()))),e.createElement(k,{darkMode:a},e.createElement("h3",{className:`text-lg font-bold mb-4 ${a?"text-gray-100":"text-gray-700"}`},"\u{1F4C9} Expense Trend"),lo().some(t=>t.total>0)?e.createElement(ve,{width:"100%",height:300},e.createElement(Wr,{data:lo()},e.createElement("defs",null,e.createElement("linearGradient",{id:"expenseGradient",x1:"0",y1:"0",x2:"0",y2:"1"},e.createElement("stop",{offset:"5%",stopColor:"#FF6B9D",stopOpacity:.4}),e.createElement("stop",{offset:"95%",stopColor:"#FF6B9D",stopOpacity:0}))),e.createElement(et,{strokeDasharray:"3 3",stroke:"#E8E4EE"}),e.createElement(Re,{dataKey:"label",tick:{fill:"#6B6789",fontSize:12}}),e.createElement(Be,{tick:{fill:"#6B6789",fontSize:12}}),e.createElement(ke,{formatter:t=>d(t)}),e.createElement(Ur,{type:"monotone",dataKey:"total",stroke:"#FF6B9D",fill:"url(#expenseGradient)",strokeWidth:3}))):e.createElement(R,{darkMode:a,icon:"\u{1F4CA}",title:"No data yet",subtitle:"Start tracking expenses to see trends!"})),e.createElement(k,{darkMode:a},e.createElement("h3",{className:`text-lg font-bold mb-4 ${a?"text-gray-100":"text-gray-700"}`},"\u{1F4C8} Income Trend"),io().some(t=>t.total>0)?e.createElement(ve,{width:"100%",height:300},e.createElement(Wr,{data:io()},e.createElement("defs",null,e.createElement("linearGradient",{id:"incomeGradient",x1:"0",y1:"0",x2:"0",y2:"1"},e.createElement("stop",{offset:"5%",stopColor:"#5FCFB5",stopOpacity:.4}),e.createElement("stop",{offset:"95%",stopColor:"#5FCFB5",stopOpacity:0}))),e.createElement(et,{strokeDasharray:"3 3",stroke:"#E8E4EE"}),e.createElement(Re,{dataKey:"label",tick:{fill:"#6B6789",fontSize:12}}),e.createElement(Be,{tick:{fill:"#6B6789",fontSize:12}}),e.createElement(ke,{formatter:t=>d(t)}),e.createElement(Ur,{type:"monotone",dataKey:"total",stroke:"#5FCFB5",fill:"url(#incomeGradient)",strokeWidth:3}))):e.createElement(R,{darkMode:a,icon:"\u{1F4B0}",title:"No income data",subtitle:"Start tracking to see trends!"})),e.createElement(k,{darkMode:a},e.createElement("h3",{className:`text-lg font-bold mb-4 ${a?"text-gray-100":"text-gray-700"}`},"\u{1F48E} Investment Activity"),co().some(t=>t.buys>0||t.sells>0)?e.createElement(ve,{width:"100%",height:300},e.createElement(qr,{data:co()},e.createElement(et,{strokeDasharray:"3 3",stroke:"#E8E4EE"}),e.createElement(Re,{dataKey:"label",tick:{fill:"#6B6789",fontSize:12}}),e.createElement(Be,{tick:{fill:"#6B6789",fontSize:12}}),e.createElement(ke,{formatter:(t,s)=>[d(t),s==="buys"?"Bought":"Sold"]}),e.createElement(jt,{formatter:t=>t==="buys"?"Bought":"Sold"}),e.createElement(Lt,{dataKey:"buys",fill:"#8B5CF6",name:"buys",radius:[4,4,0,0]}),e.createElement(Lt,{dataKey:"sells",fill:"#EC4899",name:"sells",radius:[4,4,0,0]}))):e.createElement(R,{darkMode:a,icon:"\u{1F48E}",title:"No investment data",subtitle:"Start tracking investments to see activity!"})),e.createElement(k,{darkMode:a},e.createElement("h3",{className:`text-lg font-bold mb-4 ${a?"text-gray-100":"text-gray-700"}`},"\u23F0 Hours Worked"),Lr().some(t=>t.hours>0)?e.createElement(ve,{width:"100%",height:300},e.createElement(qr,{data:Lr()},e.createElement("defs",null,e.createElement("linearGradient",{id:"hoursGradient",x1:"0",y1:"0",x2:"0",y2:"1"},e.createElement("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.8}),e.createElement("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.4}))),e.createElement(et,{strokeDasharray:"3 3",stroke:a?"#3D3A4E":"#E8E4EE"}),e.createElement(Re,{dataKey:"label",tick:{fill:"#6B6789",fontSize:12}}),e.createElement(Be,{yAxisId:"hours",tick:{fill:"#6B6789",fontSize:12}}),e.createElement(Be,{yAxisId:"earnings",orientation:"right",tick:{fill:"#6B6789",fontSize:12}}),e.createElement(ke,{formatter:(t,s)=>[s==="hours"?`${t} hrs`:d(t),s==="hours"?"Hours":"Earnings"],contentStyle:{backgroundColor:a?"#252233":"#fff",border:`2px solid ${a?"#3D3A4E":"#E8E4EE"}`,borderRadius:"12px"}}),e.createElement(jt,{formatter:t=>t==="hours"?"Hours Worked":"Earnings"}),e.createElement(Lt,{yAxisId:"hours",dataKey:"hours",fill:"url(#hoursGradient)",name:"hours",radius:[4,4,0,0]}),e.createElement(Lt,{yAxisId:"earnings",dataKey:"earnings",fill:"#10B981",name:"earnings",radius:[4,4,0,0]}))):e.createElement(R,{darkMode:a,icon:"\u23F0",title:"No work data",subtitle:"Start tracking work hours to see trends!"})),e.createElement(k,{darkMode:a},e.createElement("h3",{className:`text-lg font-bold mb-4 ${a?"text-gray-100":"text-gray-700"}`},"\u{1F4CA} Category Breakdown"),mo().some(t=>xe.some(s=>t[s]>0))?e.createElement(ve,{width:"100%",height:300},e.createElement(qr,{data:mo()},e.createElement(et,{strokeDasharray:"3 3",stroke:"#E8E4EE"}),e.createElement(Re,{dataKey:"label",tick:{fill:"#6B6789",fontSize:12}}),e.createElement(Be,{tick:{fill:"#6B6789",fontSize:12}}),e.createElement(ke,{formatter:t=>d(t)}),e.createElement(jt,null),xe.map(t=>e.createElement(Lt,{key:t,dataKey:t,fill:J[t].color,stackId:"a"})))):e.createElement(R,{darkMode:a,icon:"\u{1F4C8}",title:"No category data",subtitle:"Track expenses to see breakdowns!"})))),Ko&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},e.createElement(k,{darkMode:a,className:"max-w-lg w-full"},e.createElement("h3",{className:`text-xl font-black mb-4 ${a?"text-gray-100":"text-gray-700"}`},"\u{1F4E5} Restore Data"),e.createElement("textarea",{value:xr,onChange:t=>Ps(t.target.value),placeholder:"Paste your backup data here...",className:`w-full h-40 p-4 rounded-xl border-2 outline-none focus:border-pink-400 resize-none transition-colors ${a?"bg-[#1E1B2E] border-[#3D3A4E] text-gray-100 placeholder-gray-500":"bg-gray-50 border-gray-200 text-gray-700"}`}),e.createElement("div",{className:"flex gap-3 mt-4"},e.createElement(v,{onClick:gn},"Restore"),e.createElement(v,{variant:"ghost",onClick:()=>ur(!1)},"Cancel")))),an&&Z&&e.createElement("div",{className:"fixed bottom-24 left-1/2 transform -translate-x-1/2 z-50 undo-toast"},e.createElement("div",{className:`flex items-center gap-4 px-5 py-3 rounded-2xl shadow-2xl border-2 ${a?"bg-[#252233] border-[#3D3A4E] text-gray-100":"bg-white border-gray-200 text-gray-700"}`},e.createElement("span",{className:"text-sm font-medium"},Z.type==="income"&&"\u{1F4B8}",Z.type==="expense"&&"\u{1F9FE}",Z.type==="investment"&&"\u{1F4C8}",Z.type==="worklog"&&"\u23F0"," ","Deleted"),e.createElement("button",{onTouchEnd:t=>{t.preventDefault(),t.stopPropagation(),Qs()},onClick:t=>{t.stopPropagation(),Qs()},className:"px-4 py-1.5 rounded-xl font-bold text-sm bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-400 hover:to-pink-400 transition-all active:scale-95"},"Undo"))),ue&&e.createElement("div",{className:"fixed z-[100] context-menu",style:{left:Math.min(ue.x,window.innerWidth-160),top:Math.min(ue.y,window.innerHeight-180)},onClick:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onTouchEnd:t=>t.stopPropagation(),onMouseDown:t=>t.stopPropagation()},e.createElement("div",{className:"rounded-2xl overflow-hidden min-w-[150px] border-2",style:{backgroundColor:a?"#1a1625":"#ffffff",borderColor:a?"#3D3A4E":"#e5e7eb",boxShadow:a?"0 10px 40px rgba(0,0,0,0.8), 0 0 0 1px rgba(0,0,0,0.3)":"0 10px 40px rgba(0,0,0,0.15)"}},e.createElement("button",{onTouchEnd:t=>{t.preventDefault(),t.stopPropagation(),Ge("edit")},onClick:t=>{t.stopPropagation(),Ge("edit")},className:"w-full px-4 py-3 text-left text-sm font-medium flex items-center gap-3 transition-colors",style:{color:a?"#e5e7eb":"#374151",backgroundColor:"transparent"},onMouseEnter:t=>t.currentTarget.style.backgroundColor=a?"rgba(255,255,255,0.1)":"#f9fafb",onMouseLeave:t=>t.currentTarget.style.backgroundColor="transparent"},e.createElement(Oa,{className:"w-4 h-4"}),"Edit"),e.createElement("button",{onTouchEnd:t=>{t.preventDefault(),t.stopPropagation(),Ge("duplicate")},onClick:t=>{t.stopPropagation(),Ge("duplicate")},className:"w-full px-4 py-3 text-left text-sm font-medium flex items-center gap-3 transition-colors",style:{color:a?"#e5e7eb":"#374151",backgroundColor:"transparent",borderTop:`1px solid ${a?"#3D3A4E":"#f3f4f6"}`},onMouseEnter:t=>t.currentTarget.style.backgroundColor=a?"rgba(255,255,255,0.1)":"#f9fafb",onMouseLeave:t=>t.currentTarget.style.backgroundColor="transparent"},e.createElement(fe,{className:"w-4 h-4"}),"Duplicate"),e.createElement("button",{onTouchEnd:t=>{t.preventDefault(),t.stopPropagation(),Ge("delete")},onClick:t=>{t.stopPropagation(),Ge("delete")},className:"w-full px-4 py-3 text-left text-sm font-medium flex items-center gap-3 transition-colors",style:{color:a?"#f87171":"#ef4444",backgroundColor:"transparent",borderTop:`1px solid ${a?"#3D3A4E":"#f3f4f6"}`},onMouseEnter:t=>t.currentTarget.style.backgroundColor=a?"rgba(239,68,68,0.15)":"#fef2f2",onMouseLeave:t=>t.currentTarget.style.backgroundColor="transparent"},e.createElement(F,{className:"w-4 h-4"}),"Delete"))),Wo&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},e.createElement(k,{darkMode:a,className:"max-w-lg w-full"},e.createElement("h3",{className:`text-xl font-black mb-4 ${a?"text-gray-100":"text-gray-700"}`},"\u{1F4E4} Backup Data"),e.createElement("textarea",{value:Bs,readOnly:!0,className:`w-full h-40 p-4 rounded-xl border-2 outline-none text-xs font-mono ${a?"bg-[#1E1B2E] border-[#3D3A4E] text-gray-300":"bg-gray-50 border-gray-200 text-gray-700"}`}),e.createElement("div",{className:"flex gap-3 mt-4"},e.createElement(v,{onClick:()=>{navigator.clipboard.writeText(Bs),alert("Copied!")}},"Copy to Clipboard"),e.createElement(v,{variant:"ghost",onClick:()=>Fs(!1)},"Close")))),_o&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},e.createElement(k,{darkMode:a,className:"max-w-lg w-full"},e.createElement("h3",{className:`text-xl font-black mb-4 ${a?"text-gray-100":"text-gray-700"}`},"\u{1F4CA} Analytics Export (CSV)"),e.createElement("p",{className:`text-sm mb-3 ${a?"text-gray-400":"text-gray-500"}`},"Copy this data and paste into a spreadsheet app, or save as a .csv file"),e.createElement("textarea",{value:js,readOnly:!0,className:`w-full h-48 p-4 rounded-xl border-2 outline-none text-xs font-mono ${a?"bg-[#1E1B2E] border-[#3D3A4E] text-gray-300":"bg-gray-50 border-gray-200 text-gray-700"}`}),e.createElement("div",{className:"flex gap-3 mt-4"},e.createElement(v,{onClick:()=>{navigator.clipboard.writeText(js),alert("Copied to clipboard! Paste into Numbers, Excel, or Google Sheets.")}},"\u{1F4CB} Copy to Clipboard"),e.createElement(v,{variant:"ghost",onClick:()=>Ls(!1)},"Close")))),Vo&&fr&&e.createElement("div",{className:"fixed inset-0 z-50 flex flex-col bg-black/80 backdrop-blur-sm",onClick:()=>{Ue(!1),He(null)}},e.createElement("div",{className:`flex-shrink-0 p-4 ${a?"bg-[#252233]":"bg-white"}`,onClick:t=>t.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between max-w-4xl mx-auto"},e.createElement("h3",{className:`text-xl font-black flex items-center gap-2 ${a?"text-gray-100":"text-gray-700"}`},"\u{1F4F8} Analytics Screenshots"),e.createElement("button",{onTouchEnd:t=>{t.preventDefault(),Ue(!1),He(null)},onClick:()=>{Ue(!1),He(null)},className:`p-3 rounded-xl transition-colors press-feedback ${a?"hover:bg-white/10 text-gray-400 active:bg-white/20":"hover:bg-gray-100 text-gray-500 active:bg-gray-200"}`},e.createElement(F,{className:"w-6 h-6"}))),e.createElement("p",{className:`text-sm mt-2 max-w-4xl mx-auto ${a?"text-gray-400":"text-gray-500"}`},"\u{1F4F1} ",e.createElement("strong",null,"Long-press")," each image to save to Photos")),e.createElement("div",{className:`flex-1 overflow-auto p-4 ${a?"bg-[#1E1B2E]":"bg-gray-50"}`,onClick:t=>t.stopPropagation()},e.createElement("div",{className:"max-w-4xl mx-auto space-y-6"},e.createElement("div",null,e.createElement("p",{className:`text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Part 1 of 2"),e.createElement("img",{src:fr.top,alt:"Analytics Screenshot Part 1",className:"w-full rounded-xl shadow-2xl"})),e.createElement("div",null,e.createElement("p",{className:`text-sm font-bold mb-2 ${a?"text-gray-400":"text-gray-500"}`},"Part 2 of 2"),e.createElement("img",{src:fr.bottom,alt:"Analytics Screenshot Part 2",className:"w-full rounded-xl shadow-2xl"})))),e.createElement("div",{className:`flex-shrink-0 p-4 ${a?"bg-[#252233]":"bg-white"}`,onClick:t=>t.stopPropagation()},e.createElement("div",{className:"max-w-4xl mx-auto flex justify-center"},e.createElement("button",{onTouchEnd:t=>{t.preventDefault(),Ue(!1),He(null)},onClick:()=>{Ue(!1),He(null)},className:`px-8 py-4 rounded-2xl font-bold text-lg transition-all press-feedback active:scale-95 ${a?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-500 hover:to-pink-500":"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-400 hover:to-pink-400"}`},"\u2715 Close")))),Fo&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},e.createElement(k,{darkMode:a,className:"max-w-md w-full"},e.createElement("h3",{className:`text-xl font-black mb-4 ${a?"text-gray-100":"text-gray-700"}`},"\u{1F504} Add Recurring Expense"),e.createElement("div",{className:"space-y-4"},e.createElement("input",{placeholder:"Name",value:Za,onChange:t=>bs(t.target.value),className:`candy-input ${a?"candy-input-dark":"candy-input-light"}`}),e.createElement("input",{type:"number",placeholder:"Amount",value:Ra,onChange:t=>ys(t.target.value),className:`candy-input ${a?"candy-input-dark":"candy-input-light"}`}),e.createElement(Yt,{darkMode:a,value:hs,onChange:t=>Bo(t.target.value)},xe.map(t=>e.createElement("option",{key:t,value:t},t))),e.createElement(Yt,{darkMode:a,value:fs,onChange:t=>Po(t.target.value)},Array.from({length:28},(t,s)=>e.createElement("option",{key:s+1,value:s+1},"Day ",s+1)))),e.createElement("div",{className:"flex gap-3 mt-4"},e.createElement(v,{onClick:zn},"Add"),e.createElement(v,{variant:"ghost",onClick:()=>Va(!1)},"Cancel")))),Mo&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},e.createElement(k,{darkMode:a,className:"max-w-md w-full"},e.createElement("h3",{className:`text-xl font-black mb-4 flex items-center gap-2 ${a?"text-gray-100":"text-gray-700"}`},ee==="credit"?"\u{1F4B3}":"\u{1F4B5}"," Add ",ee==="credit"?"Credit Card":"Checking Account"),e.createElement("div",{className:`flex rounded-xl overflow-hidden border-2 mb-4 ${a?"border-[#3D3A4E]":"border-gray-200"}`},e.createElement("button",{onClick:()=>_t("debit"),className:`flex-1 py-2 px-3 text-sm font-bold transition-all flex items-center justify-center gap-2 ${ee==="debit"?"bg-gradient-to-r from-emerald-400 to-teal-400 text-white":a?"text-gray-400 hover:bg-white/5":"text-gray-500 hover:bg-gray-50"}`},"\u{1F4B5} Checking"),e.createElement("button",{onClick:()=>_t("credit"),className:`flex-1 py-2 px-3 text-sm font-bold transition-all flex items-center justify-center gap-2 ${ee==="credit"?"bg-gradient-to-r from-violet-400 to-purple-400 text-white":a?"text-gray-400 hover:bg-white/5":"text-gray-500 hover:bg-gray-50"}`},"\u{1F4B3} Credit Card")),e.createElement("div",{className:"space-y-4"},e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-1 ${a?"text-gray-400":"text-gray-500"}`},ee==="credit"?"Card Name":"Account Name"),e.createElement("input",{placeholder:ee==="credit"?"e.g., Chase Sapphire":"e.g., Main Checking",value:nt,onChange:t=>Ya(t.target.value),className:`candy-input ${a?"candy-input-dark":"candy-input-light"}`})),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-1 ${a?"text-gray-400":"text-gray-500"}`},ee==="credit"?"Current Balance (Owed)":"Current Balance"),e.createElement("input",{type:"number",placeholder:"0.00",value:Xt,onChange:t=>za(t.target.value),className:`candy-input ${a?"candy-input-dark":"candy-input-light"}`})),ee==="credit"&&e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-1 ${a?"text-gray-400":"text-gray-500"}`},"Credit Limit"),e.createElement("input",{type:"number",placeholder:"5000",value:Zr,onChange:t=>Rr(t.target.value),className:`candy-input ${a?"candy-input-dark":"candy-input-light"}`})),e.createElement("div",{className:"grid grid-cols-2 gap-3"},e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-1 ${a?"text-gray-400":"text-gray-500"}`},"APR %"),e.createElement("input",{type:"number",placeholder:"24.99",value:es,onChange:t=>ts(t.target.value),className:`candy-input ${a?"candy-input-dark":"candy-input-light"}`})),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-1 ${a?"text-gray-400":"text-gray-500"}`},"Min Payment"),e.createElement("input",{type:"number",placeholder:"25",value:as,onChange:t=>rs(t.target.value),className:`candy-input ${a?"candy-input-dark":"candy-input-light"}`}))),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-1 ${a?"text-gray-400":"text-gray-500"}`},"Payment Due Day"),e.createElement(Yt,{darkMode:a,value:ss,onChange:t=>os(t.target.value)},Array.from({length:28},(t,s)=>e.createElement("option",{key:s+1,value:s+1},"Day ",s+1)))))),e.createElement("div",{className:"flex gap-3 mt-4"},e.createElement(v,{onClick:ee==="credit"?En:In},"Add ",ee==="credit"?"Card":"Account"),e.createElement(v,{variant:"ghost",onClick:()=>{Gt(!1),_t("credit")}},"Cancel")))),Ja&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},e.createElement(k,{darkMode:a,className:"max-w-sm w-full"},e.createElement("h3",{className:`text-xl font-black mb-4 flex items-center gap-2 ${a?"text-gray-100":"text-gray-700"}`},"\u{1F4B5} Make Payment"),(()=>{let t=j.find(s=>s.id===Ja);return t?e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:`p-3 rounded-xl text-center ${a?"bg-[#1E1B2E]":"bg-gray-50"}`},e.createElement("p",{className:`text-sm ${a?"text-gray-400":"text-gray-500"}`},t.name),e.createElement("p",{className:"text-2xl font-bold text-rose-500"},d(t.balance)),e.createElement("p",{className:`text-xs ${a?"text-gray-500":"text-gray-400"}`},"Current Balance")),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-1 ${a?"text-gray-400":"text-gray-500"}`},"Payment Amount"),e.createElement("input",{type:"number",placeholder:t.minPayment.toString(),value:lt,onChange:s=>it(s.target.value),className:`candy-input ${a?"candy-input-dark":"candy-input-light"}`,autoFocus:!0}),e.createElement("div",{className:"flex gap-2 mt-2"},e.createElement("button",{onClick:()=>it(String(t.minPayment)),className:`text-xs px-2 py-1 rounded-lg ${a?"bg-purple-900/30 text-purple-400":"bg-purple-100 text-purple-600"}`},"Min (",d(t.minPayment),")"),e.createElement("button",{onClick:()=>it(String(t.balance)),className:`text-xs px-2 py-1 rounded-lg ${a?"bg-emerald-900/30 text-emerald-400":"bg-emerald-100 text-emerald-600"}`},"Pay Full")))):null})(),e.createElement("div",{className:"flex gap-3 mt-4"},e.createElement(v,{onClick:()=>Dn(Ja)},"Pay"),e.createElement(v,{variant:"ghost",onClick:()=>{qa(null),it("")}},"Cancel")))),Wa&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},e.createElement(k,{darkMode:a,className:"max-w-sm w-full"},e.createElement("h3",{className:`text-xl font-black mb-4 flex items-center gap-2 ${a?"text-gray-100":"text-gray-700"}`},"\u{1F4B0} Make Deposit"),(()=>{let t=Y.find(s=>s.id===Wa);return t?e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:`p-3 rounded-xl text-center ${a?"bg-[#1E1B2E]":"bg-gray-50"}`},e.createElement("p",{className:`text-sm ${a?"text-gray-400":"text-gray-500"}`},t.name),e.createElement("p",{className:"text-2xl font-bold text-emerald-500"},d(t.balance)),e.createElement("p",{className:`text-xs ${a?"text-gray-500":"text-gray-400"}`},"Current Balance")),e.createElement("div",null,e.createElement("label",{className:`block text-sm font-bold mb-1 ${a?"text-gray-400":"text-gray-500"}`},"Deposit Amount"),e.createElement("input",{type:"number",placeholder:"0.00",value:dt,onChange:s=>Ha(s.target.value),className:`candy-input ${a?"candy-input-dark":"candy-input-light"}`,autoFocus:!0}))):null})(),e.createElement("div",{className:"flex gap-3 mt-4"},e.createElement(v,{onClick:()=>Fn(Wa)},"Deposit"),e.createElement(v,{variant:"ghost",onClick:()=>{Ua(null),Ha("")}},"Cancel")))),yr&&e.createElement("div",{className:"fixed inset-0 z-50 bg-black/50",onTouchMove:t=>t.preventDefault(),onClick:()=>hr(!1)},e.createElement("div",{className:"absolute inset-0 flex items-center justify-center p-4"},e.createElement("div",{className:`max-w-2xl w-full rounded-3xl border-2 shadow-2xl ${a?"bg-[#252233] border-[#3D3A4E]":"bg-white border-gray-200"}`,onClick:t=>t.stopPropagation(),style:{maxHeight:"80vh",display:"flex",flexDirection:"column"}},e.createElement("div",{className:`p-6 pb-4 border-b flex-shrink-0 ${a?"border-[#3D3A4E]":"border-gray-200"}`},e.createElement("h3",{className:`text-2xl font-black flex items-center gap-3 ${a?"text-gray-100":"text-gray-700"}`},e.createElement(ho,{className:"w-8 h-8 text-yellow-500"}),"Achievements",e.createElement("span",{className:`text-lg ${a?"text-gray-500":"text-gray-400"}`},"(",Se.length,"/",Na.length,")"))),e.createElement("div",{className:"p-6 pt-4 overflow-y-scroll flex-1",onTouchMove:t=>t.stopPropagation(),style:{WebkitOverflowScrolling:"touch",minHeight:0}},e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 pb-2"},Na.map(t=>{let s=Se.includes(t.id);return e.createElement("div",{key:t.id,className:`p-4 rounded-2xl border-2 text-center transition-all ${s?a?"bg-yellow-900/30 border-yellow-600":"bg-yellow-50 border-yellow-300":a?"bg-[#1E1B2E] border-[#3D3A4E] opacity-50":"bg-gray-50 border-gray-200 opacity-50"}`},e.createElement("div",{className:"text-4xl mb-2"},t.icon),e.createElement("p",{className:`font-bold ${a?"text-gray-100":"text-gray-700"}`},t.name),e.createElement("p",{className:`text-xs mt-1 ${a?"text-gray-500":"text-gray-400"}`},t.description),s&&e.createElement("p",{className:"text-xs text-yellow-500 font-bold mt-2"},"\u2713 Unlocked!"))}))),e.createElement("div",{className:`p-4 border-t flex-shrink-0 ${a?"border-[#3D3A4E]":"border-gray-200"}`},e.createElement("div",{className:"flex justify-center"},e.createElement(v,{variant:"ghost",onClick:()=>hr(!1)},"Close")))))),Zo&&e.createElement(rl,null),Js&&e.createElement(sl,{achievement:Js}),on&&e.createElement(ol,null),Ro&&e.createElement("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-6 right-6 w-14 h-14 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 text-white shadow-lg shadow-pink-300/50 flex items-center justify-center btn-bounce z-30"},e.createElement(xl,{className:"w-6 h-6"})))))}var El=nl(document.getElementById("root"));El.render(e.createElement(FinanceTracker,null));export{$l as default};
